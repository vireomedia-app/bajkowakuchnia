(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{5167:function(e,a,t){Promise.resolve().then(t.bind(t,9792))},9792:function(e,a,t){"use strict";t.d(a,{InventoryPageClient:function(){return K}});var s=t(5444),r=t(9300),n=t(9047),l=t(2154);let i=(0,l.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),d=(0,l.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),o=(0,l.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var c=t(362),m=t(4670),u=t(8967),x=t(3135),p=t(8532);function h({product:e}){let a=[{key:"K",label:"Kalorie",value:e.calories},{key:"B",label:"Białko",value:e.protein},{key:"T",label:"Tłuszcz",value:e.fat},{key:"W",label:"Węglowodany",value:e.carbohydrates},{key:"Ca",label:"Wapń",value:e.calcium},{key:"Fe",label:"Żelazo",value:e.iron},{key:"C",label:"Witamina C",value:e.vitaminC}];return(0,s.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:a.map(({key:e,label:a,value:t})=>{let r=null!=t&&t>0;return(0,s.jsx)("div",{title:`${a}: ${r?"uzupełnione":"brak danych"}`,className:`inline-flex items-center justify-center px-1.5 py-0.5 rounded text-xs font-semibold border ${r?"bg-green-100 text-green-700 border-green-300":"bg-red-100 text-red-700 border-red-300"}`,style:{minWidth:"Ca"===e||"Fe"===e?"26px":"18px"},children:e},e)})})}function f({products:e}){return e&&0!==e.length?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 flex items-center space-x-2",children:[(0,s.jsx)(i,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,s.jsx)("span",{children:"Lista Produkt\xf3w"})]})}),(0,s.jsx)("div",{className:"hidden sm:block overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nazwa Produktu"}),(0,s.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Jedn."}),(0,s.jsx)("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Stan"}),(0,s.jsx)("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"St."}),(0,s.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Alergeny"}),(0,s.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Wartości Odżywcze"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,a)=>{let t=e?.allergens&&e.allergens.length>0;return(0,s.jsxs)(x.E.tr,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:0},className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>window.location.href=`/product/${e?.id||""}`,children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(0,s.jsx)(i,{className:"w-4 h-4 text-white"})})}),(0,s.jsx)("div",{className:"min-w-0",children:(0,s.jsxs)("div",{className:`text-sm text-gray-900 ${t?"font-bold":"font-medium"}`,style:{color:"#111827"},children:[e?.name||"Nieznany produkt",e?.manufacturer&&(0,s.jsxs)("span",{className:"text-gray-700 font-normal text-xs",style:{color:"#374151"},children:[" - ",e.manufacturer]})]})})]})}),(0,s.jsx)("td",{className:"px-3 py-3 text-center",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-700 text-white border border-gray-800",children:e?.unit||"szt"})}),(0,s.jsx)("td",{className:"px-3 py-3 text-right",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",style:{color:"#111827"},children:(e?.currentStock??0).toFixed(2)})}),(0,s.jsx)("td",{className:"px-2 py-3 text-center",children:(e?.currentStock??0)>0?(0,s.jsx)("div",{title:"Na stanie",children:(0,s.jsx)(d,{className:"w-5 h-5 text-green-600 mx-auto"})}):(0,s.jsx)("div",{title:"Brak stanu",children:(0,s.jsx)(o,{className:"w-5 h-5 text-red-600 mx-auto"})})}),(0,s.jsx)("td",{className:"px-3 py-3",children:e?.allergens&&e.allergens.length>0?(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 text-orange-600 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-900",style:{color:"#111827"},children:(0,p.x8)(e.allergens)})]}):(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"-"})}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)(h,{product:e})})]},e?.id||`product-${a}`)})})]})}),(0,s.jsx)("div",{className:"sm:hidden divide-y divide-gray-200",children:e.map((e,a)=>{let t=e?.allergens&&e.allergens.length>0;return(0,s.jsxs)(x.E.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:0},className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>window.location.href=`/product/${e?.id||""}`,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:(0,s.jsx)(i,{className:"w-6 h-6 text-white"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:`text-sm text-gray-900 ${t?"font-bold":"font-medium"}`,style:{color:"#111827"},children:[e?.name||"Nieznany produkt",e?.manufacturer&&(0,s.jsxs)("span",{className:"text-gray-700 font-normal text-xs",style:{color:"#374151"},children:[" - ",e.manufacturer]})]}),(0,s.jsx)("div",{className:"mt-1 flex items-center gap-2",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-700 text-white border border-gray-800",children:e?.unit||"szt"})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"text-xs text-gray-700 font-medium",style:{color:"#374151"},children:"Aktualny stan"}),(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",style:{color:"#111827"},children:[(e?.currentStock??0).toFixed(2)," ",e?.unit||"szt"]})]}),(0,s.jsx)("div",{children:(e?.currentStock??0)>0?(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-600 text-white border border-green-700",children:[(0,s.jsx)(m.Z,{className:"w-3 h-3 mr-1"}),"Na stanie"]}):(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-red-600 text-white border border-red-700",children:[(0,s.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),"Brak"]})})]}),(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("div",{className:"text-xs text-gray-700 font-medium mb-1",style:{color:"#374151"},children:"Wartości odżywcze"}),(0,s.jsx)(h,{product:e})]}),e?.allergens&&e.allergens.length>0&&(0,s.jsx)("div",{className:"pt-2 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(c.Z,{className:"w-4 h-4 text-orange-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-gray-700 font-medium",style:{color:"#374151"},children:"Alergeny"}),(0,s.jsx)("div",{className:"text-xs font-medium text-gray-900 mt-0.5",style:{color:"#111827"},children:(0,p.x8)(e.allergens)})]})]})})]},e?.id||`product-mobile-${a}`)})})]}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-12 text-center",children:[(0,s.jsx)(i,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brak produkt\xf3w"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Nie znaleziono żadnych produkt\xf3w w magazynie."})]})}var g=t(9530),y=t(2422),j=t(4678),b=t(4635),N=t(489),v=t(1489),w=t(6167),k=t(6772),z=t(1585);let C=[{value:"kg",label:"kg"},{value:"szt",label:"szt"},{value:"l",label:"l"},{value:"opak",label:"opak"},{value:"g",label:"g"},{value:"ml",label:"ml"},{value:"inne",label:"inne"}];function S({isOpen:e,onClose:a,initialName:t=""}){let[l,d]=(0,r.useState)({name:t,unit:"szt",manufacturer:"",initialStock:"0",calories:"",salt:"",protein:"",fat:"",saturatedFat:"",carbohydrates:"",sugars:"",calcium:"",iron:"",vitaminC:"",allergens:[]}),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)({}),x=(0,n.useRouter)();(0,r.useEffect)(()=>{t&&d(e=>({...e,name:t}))},[t]);let h=()=>{let e={};l.name?.trim()||(e.name="Nazwa produktu jest wymagana"),l.unit||(e.unit="Jednostka miary jest wymagana");let a=parseFloat(l.initialStock);return(isNaN(a)||a<0)&&(e.initialStock="Stan początkowy musi być liczbą nie mniejszą od 0"),u(e),0===Object.keys(e).length},f=e=>{d(a=>{let t=a.allergens.includes(e)?a.allergens.filter(a=>a!==e):[...a.allergens,e];return{...a,allergens:t}})},S=async e=>{if(e.preventDefault(),h()){c(!0);try{let e={name:l.name.trim(),unit:l.unit,manufacturer:l.manufacturer||null,initialStock:parseFloat(l.initialStock),calories:l.calories?parseFloat(l.calories):null,salt:l.salt?parseFloat(l.salt):null,protein:l.protein?parseFloat(l.protein):null,fat:l.fat?parseFloat(l.fat):null,saturatedFat:l.saturatedFat?parseFloat(l.saturatedFat):null,carbohydrates:l.carbohydrates?parseFloat(l.carbohydrates):null,sugars:l.sugars?parseFloat(l.sugars):null,calcium:l.calcium?parseFloat(l.calcium):null,iron:l.iron?parseFloat(l.iron):null,vitaminC:l.vitaminC?parseFloat(l.vitaminC):null,allergens:l.allergens},t=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.error||"Błąd podczas dodawania produktu")}let s=await t.json();z.A.success("Produkt został dodany pomyślnie!"),window.dispatchEvent(new CustomEvent("productAdded",{detail:s})),d({name:"",unit:"szt",manufacturer:"",initialStock:"0",calories:"",salt:"",protein:"",fat:"",saturatedFat:"",carbohydrates:"",sugars:"",calcium:"",iron:"",vitaminC:"",allergens:[]}),u({}),a(),x.refresh()}catch(e){console.error("Error adding product:",e),z.A.error(e instanceof Error?e.message:"Błąd podczas dodawania produktu")}finally{c(!1)}}},Z=()=>{o||(d({name:"",unit:"szt",manufacturer:"",initialStock:"0",calories:"",salt:"",protein:"",fat:"",saturatedFat:"",carbohydrates:"",sugars:"",calcium:"",iron:"",vitaminC:"",allergens:[]}),u({}),a())};return(0,s.jsx)(g.Vq,{open:e,onOpenChange:Z,children:(0,s.jsxs)(g.cZ,{className:"sm:max-w-[600px] max-h-[90vh]",children:[(0,s.jsxs)(g.fK,{children:[(0,s.jsxs)(g.$N,{className:"flex items-center space-x-2",children:[(0,s.jsx)(i,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{children:"Dodaj nowy produkt"})]}),(0,s.jsx)(g.Be,{children:"Wypełnij podstawowe informacje i wartości odżywcze produktu."})]}),(0,s.jsx)(v.x,{className:"max-h-[60vh] pr-4",children:(0,s.jsx)("form",{onSubmit:S,id:"add-product-form",children:(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm text-gray-700",children:"Podstawowe informacje"}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"name",children:"Nazwa produktu *"}),(0,s.jsx)(j.I,{id:"name",value:l.name,onChange:e=>d({...l,name:e.target.value}),placeholder:"Np. Mąka pszenna",className:m.name?"border-red-300":"",disabled:o,required:!0}),m.name&&(0,s.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:m.name})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"unit",children:"Jednostka miary *"}),(0,s.jsxs)(N.Ph,{value:l.unit,onValueChange:e=>d({...l,unit:e}),disabled:o,required:!0,children:[(0,s.jsx)(N.i4,{className:m.unit?"border-red-300":"",children:(0,s.jsx)(N.ki,{placeholder:"Wybierz jednostkę"})}),(0,s.jsx)(N.Bw,{children:C.map(e=>(0,s.jsx)(N.Ql,{value:e.value,children:e.label},e.value))})]}),m.unit&&(0,s.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:m.unit})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"manufacturer",children:"Nazwa producenta"}),(0,s.jsx)(j.I,{id:"manufacturer",value:l.manufacturer,onChange:e=>d({...l,manufacturer:e.target.value}),placeholder:"Np. Młyny Polskie",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"initialStock",children:"Stan początkowy *"}),(0,s.jsx)(j.I,{id:"initialStock",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:l.initialStock,onChange:e=>d({...l,initialStock:e.target.value}),className:m.initialStock?"border-red-300":"",disabled:o}),m.initialStock&&(0,s.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:m.initialStock})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"font-semibold text-sm text-gray-700",children:["Wartości odżywcze (na 100","ml"===l.unit||"l"===l.unit?" ml":" g",")"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"calories",children:"Kalorie (kcal)"}),(0,s.jsx)(j.I,{id:"calories",type:"number",step:"0.01",min:"0",value:l.calories,onChange:e=>d({...l,calories:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"salt",children:"S\xf3l (g)"}),(0,s.jsx)(j.I,{id:"salt",type:"number",step:"0.01",min:"0",value:l.salt,onChange:e=>d({...l,salt:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"protein",children:"Białko (g)"}),(0,s.jsx)(j.I,{id:"protein",type:"number",step:"0.01",min:"0",value:l.protein,onChange:e=>d({...l,protein:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2 col-span-2",children:[(0,s.jsx)(b._,{htmlFor:"fat",children:"Tłuszcz (g)"}),(0,s.jsx)(j.I,{id:"fat",type:"number",step:"0.01",min:"0",value:l.fat,onChange:e=>d({...l,fat:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2 col-span-2 pl-4",children:[(0,s.jsx)(b._,{htmlFor:"saturatedFat",className:"text-sm text-muted-foreground",children:"w tym kwasy tłuszczowe nasycone (g)"}),(0,s.jsx)(j.I,{id:"saturatedFat",type:"number",step:"0.01",min:"0",value:l.saturatedFat,onChange:e=>d({...l,saturatedFat:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2 col-span-2",children:[(0,s.jsx)(b._,{htmlFor:"carbohydrates",children:"Węglowodany (g)"}),(0,s.jsx)(j.I,{id:"carbohydrates",type:"number",step:"0.01",min:"0",value:l.carbohydrates,onChange:e=>d({...l,carbohydrates:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2 col-span-2 pl-4",children:[(0,s.jsx)(b._,{htmlFor:"sugars",className:"text-sm text-muted-foreground",children:"w tym cukry (g)"}),(0,s.jsx)(j.I,{id:"sugars",type:"number",step:"0.01",min:"0",value:l.sugars,onChange:e=>d({...l,sugars:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"calcium",children:"Wapń (mg)"}),(0,s.jsx)(j.I,{id:"calcium",type:"number",step:"0.01",min:"0",value:l.calcium,onChange:e=>d({...l,calcium:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"iron",children:"Żelazo (mg)"}),(0,s.jsx)(j.I,{id:"iron",type:"number",step:"0.01",min:"0",value:l.iron,onChange:e=>d({...l,iron:e.target.value}),placeholder:"0",disabled:o})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(b._,{htmlFor:"vitaminC",children:"Witamina C (mg)"}),(0,s.jsx)(j.I,{id:"vitaminC",type:"number",step:"0.01",min:"0",value:l.vitaminC,onChange:e=>d({...l,vitaminC:e.target.value}),placeholder:"0",disabled:o})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm text-gray-700",children:"Alergeny"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Wybierz alergeny, kt\xf3re występują w tym produkcie (pole opcjonalne)"}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-3 max-h-[200px] overflow-y-auto border rounded-md p-3",children:p.Ri.map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)(w.X,{id:`allergen-${e.id}`,checked:l.allergens.includes(e.id),onCheckedChange:()=>f(e.id),disabled:o}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(b._,{htmlFor:`allergen-${e.id}`,className:"text-sm font-medium leading-none cursor-pointer",children:["A:",e.id," - ",e.name]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},e.id))}),l.allergens.length>0&&(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,s.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["Wybrane alergeny: ",l.allergens.sort((e,a)=>e-a).map(e=>`A:${e}`).join(", ")]})})]})]})})}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,s.jsx)(y.z,{type:"button",variant:"outline",onClick:Z,disabled:o,className:"flex-1",children:"Anuluj"}),(0,s.jsx)(y.z,{type:"submit",form:"add-product-form",className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:o,children:o?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Dodawanie..."})]}):"Dodaj produkt"})]})]})})}var Z=t(6584);function E(){let[e,a]=(0,r.useState)(!1),t=async()=>{a(!0);try{let e=await fetch("/api/export",{method:"GET"});if(!e.ok)throw Error("Błąd podczas eksportu danych");let a=await e.blob(),t=window.URL.createObjectURL(a),s=document.createElement("a");s.href=t;let r=new Date().toISOString().split("T")[0];s.download=`kartoteka_magazynowa_${r}.xlsx`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t),z.A.success("Plik Excel został pobrany pomyślnie!")}catch(e){console.error("Export error:",e),z.A.error("Błąd podczas eksportu danych")}finally{a(!1)}};return(0,s.jsx)(y.z,{onClick:t,variant:"outline",disabled:e,className:"border-gray-300 hover:bg-gray-50 px-6 py-2.5 rounded-lg font-medium shadow-sm hover:shadow-md transition-all duration-200",children:e?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,s.jsx)("span",{children:"Eksportowanie..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{className:"w-5 h-5 mr-2"}),"Eksportuj do Excel"]})})}var R=t(5076);function F(){let[e,a]=(0,r.useState)(""),[t,l]=(0,r.useTransition)(),i=(0,n.useRouter)(),d=e=>{a(e),l(()=>{e?i.push(`/inventory?search=${encodeURIComponent(e)}`):i.push("/inventory")})};return(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(R.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)(j.I,{type:"text",placeholder:"Szukaj produkt\xf3w...",value:e,onChange:e=>d(e.target.value),className:"pl-10 pr-4 py-2 w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:t}),t&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})}var I=t(1890),A=t(7336),_=t(8155);let O=(0,l.Z)("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);var M=t(9429),P=t(1084);function K({products:e,searchQuery:a,addProductName:t}){(0,n.useRouter)();let[l,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)("");return(0,r.useEffect)(()=>{if(t){c(decodeURIComponent(t)),d(!0);let e=new URL(window.location.href);e.searchParams.delete("add_product"),window.history.replaceState({},"",e.toString())}},[t]),(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)(P.default,{href:"/",children:(0,s.jsxs)(y.z,{variant:"ghost",className:"gap-2",children:[(0,s.jsx)(_.Z,{className:"w-4 h-4"}),"Powr\xf3t do menu gł\xf3wnego"]})}),(0,s.jsx)(A.LogoutButton,{})]}),(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 text-white mb-4",children:(0,s.jsx)(O,{className:"w-8 h-8"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Kartoteka Magazynowa"}),(0,s.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Kompleksowe narzędzie do śledzenia stan\xf3w magazynowych i historii transakcji dla wszystkich produkt\xf3w w firmie."})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[(0,s.jsx)(F,{}),(0,s.jsx)("div",{className:"flex gap-3",children:(0,s.jsxs)(y.z,{onClick:()=>d(!0),className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[(0,s.jsx)(M.Z,{className:"w-4 h-4"}),"Dodaj nowy produkt"]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,s.jsx)(i,{className:"w-6 h-6 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:a?"Znaleziono produkt\xf3w":"Łączna liczba produkt\xf3w"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e?.length||0})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,s.jsx)(i,{className:"w-6 h-6 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Produkty z dodatnim stanem"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e?.filter(e=>(e?.currentStock??0)>0)?.length||0})]})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"p-3 bg-yellow-100 rounded-lg",children:(0,s.jsx)(i,{className:"w-6 h-6 text-yellow-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Produkty bez stanu"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e?.filter(e=>(e?.currentStock??0)===0)?.length||0})]})]})})]}),(0,s.jsx)(f,{products:e||[]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center pt-4 pb-8",children:[(0,s.jsx)(I.BackupManager,{}),(0,s.jsx)(E,{})]}),(0,s.jsx)(S,{isOpen:l,onClose:()=>{d(!1),c("")},initialName:o})]})}},6167:function(e,a,t){"use strict";t.d(a,{X:function(){return d}});var s=t(5444),r=t(9300),n=t(1831),l=t(7248),i=t(5522);let d=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.fC,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:(0,s.jsx)(n.z$,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})}));d.displayName=n.fC.displayName},4678:function(e,a,t){"use strict";t.d(a,{I:function(){return l}});var s=t(5444),r=t(9300),n=t(5522);let l=r.forwardRef(({className:e,type:a,...t},r)=>(0,s.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));l.displayName="Input"},4635:function(e,a,t){"use strict";t.d(a,{_:function(){return o}});var s=t(5444),r=t(9300),n=t(4100),l=t(2371),i=t(5522);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.f,{ref:t,className:(0,i.cn)(d(),e),...a}));o.displayName=n.f.displayName},1489:function(e,a,t){"use strict";t.d(a,{x:function(){return i}});var s=t(5444),r=t(9300),n=t(4712),l=t(5522);let i=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(n.fC,{ref:r,className:(0,l.cn)("relative overflow-hidden",e),...t,children:[(0,s.jsx)(n.l_,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(d,{}),(0,s.jsx)(n.Ns,{})]}));i.displayName=n.fC.displayName;let d=r.forwardRef(({className:e,orientation:a="vertical",...t},r)=>(0,s.jsx)(n.gb,{ref:r,orientation:a,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:(0,s.jsx)(n.q4,{className:"relative flex-1 rounded-full bg-border"})}));d.displayName=n.gb.displayName},489:function(e,a,t){"use strict";t.d(a,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return f},i4:function(){return u},ki:function(){return m}});var s=t(5444),r=t(9300),n=t(8913),l=t(3751),i=t(6997),d=t(7248),o=t(5522);let c=n.fC;n.ZA;let m=n.B4,u=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(n.xz,{ref:r,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[a,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(l.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=n.xz.displayName;let x=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})}));x.displayName=n.u_.displayName;let p=r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})}));p.displayName=n.$G.displayName;let h=r.forwardRef(({className:e,children:a,position:t="popper",...r},l)=>(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{ref:l,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[(0,s.jsx)(x,{}),(0,s.jsx)(n.l_,{className:(0,o.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(p,{})]})}));h.displayName=n.VY.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=n.__.displayName;let f=r.forwardRef(({className:e,children:a,...t},r)=>(0,s.jsxs)(n.ck,{ref:r,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(n.eT,{children:a})]}));f.displayName=n.ck.displayName,r.forwardRef(({className:e,...a},t)=>(0,s.jsx)(n.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=n.Z0.displayName},8532:function(e,a,t){"use strict";t.d(a,{Ri:function(){return s},x8:function(){return r}});let s=[{id:1,name:"GLUTEN",description:"Ziarna zb\xf3ż zawierające GLUTEN (pszenica, żyto, jęczmień, owies, orkisz, kamut) oraz produkty pochodne"},{id:2,name:"SKORUPIAKI",description:"SKORUPIAKI i produkty pochodne"},{id:3,name:"JAJA",description:"JAJA i produkty pochodne"},{id:4,name:"RYBY",description:"RYBY i produkty pochodne"},{id:5,name:"ORZESZKI ZIEMNE",description:"ORZESZKI ZIEMNE (arachidowe) i produkty pochodne"},{id:6,name:"SOJA",description:"SOJA i produkty pochodne"},{id:7,name:"MLEKO",description:"MLEKO i produkty pochodne (łącznie z laktozą)"},{id:8,name:"ORZECHY",description:"ORZECHY (migdały, laskowe, włoskie, nerkowca, pekan, brazylijskie, pistacje, makadamia) i produkty pochodne"},{id:9,name:"SELER",description:"SELER i produkty pochodne"},{id:10,name:"GORCZYCA",description:"GORCZYCA i produkty pochodne"},{id:11,name:"SEZAM",description:"NASIONA SEZAMU i produkty pochodne"},{id:12,name:"DWUTLENEK SIARKI",description:"DWUTLENEK SIARKI i siarczyny w stężeniach powyżej 10 mg/kg lub 10 mg/l (SO₂)"},{id:13,name:"ŁUBIN",description:"ŁUBIN i produkty pochodne"},{id:14,name:"MIĘCZAKI",description:"MIĘCZAKI i produkty pochodne"}];function r(e){return e&&0!==e.length?e.sort((e,a)=>e-a).map(e=>`A:${e}`).join(", "):""}},8155:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9429:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5076:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8967:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},4670:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},362:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(2154).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1831:function(e,a,t){"use strict";t.d(a,{fC:function(){return k},z$:function(){return z}});var s=t(9300),r=t(8051),n=t(8788),l=t(5994),i=t(838),d=t(7449),o=t(7681),c=t(271),m=t(7234),u=t(5444),x="Checkbox",[p,h]=(0,n.b)(x),[f,g]=p(x),y=s.forwardRef((e,a)=>{let{__scopeCheckbox:t,name:n,checked:d,defaultChecked:o,required:c,disabled:x,value:p="on",onCheckedChange:h,...g}=e,[y,j]=s.useState(null),b=(0,r.e)(a,e=>j(e)),k=s.useRef(!1),z=!y||!!y.closest("form"),[C=!1,S]=(0,i.T)({prop:d,defaultProp:o,onChange:h}),Z=s.useRef(C);return s.useEffect(()=>{let e=y?.form;if(e){let a=()=>S(Z.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[y,S]),(0,u.jsxs)(f,{scope:t,state:C,disabled:x,children:[(0,u.jsx)(m.WV.button,{type:"button",role:"checkbox","aria-checked":v(C)?"mixed":C,"aria-required":c,"data-state":w(C),"data-disabled":x?"":void 0,disabled:x,value:p,...g,ref:b,onKeyDown:(0,l.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.M)(e.onClick,e=>{S(e=>!!v(e)||!e),z&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),z&&(0,u.jsx)(N,{control:y,bubbles:!k.current,name:n,value:p,checked:C,required:c,disabled:x,style:{transform:"translateX(-100%)"}})]})});y.displayName=x;var j="CheckboxIndicator",b=s.forwardRef((e,a)=>{let{__scopeCheckbox:t,forceMount:s,...r}=e,n=g(j,t);return(0,u.jsx)(c.z,{present:s||v(n.state)||!0===n.state,children:(0,u.jsx)(m.WV.span,{"data-state":w(n.state),"data-disabled":n.disabled?"":void 0,...r,ref:a,style:{pointerEvents:"none",...e.style}})})});b.displayName=j;var N=e=>{let{control:a,checked:t,bubbles:r=!0,...n}=e,l=s.useRef(null),i=(0,d.D)(t),c=(0,o.t)(a);return s.useEffect(()=>{let e=l.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==t&&a){let s=new Event("click",{bubbles:r});e.indeterminate=v(t),a.call(e,!v(t)&&t),e.dispatchEvent(s)}},[i,t,r]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:!v(t)&&t,...n,tabIndex:-1,ref:l,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function v(e){return"indeterminate"===e}function w(e){return v(e)?"indeterminate":e?"checked":"unchecked"}var k=y,z=b}},function(e){e.O(0,[255,558,585,687,954,525,390,49,685,402,346,386,156,744],function(){return e(e.s=5167)}),_N_E=e.O()}]);