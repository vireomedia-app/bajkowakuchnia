"use strict";exports.id=4946,exports.ids=[4946],exports.modules={24279:(e,t,a)=>{a.d(t,{x:()=>d});var r=a(62901),o=a(24383),n=a(82477),i=a(68637);let d=o.forwardRef(({className:e,children:t,...a},o)=>(0,r.jsxs)(n.fC,{ref:o,className:(0,i.cn)("relative overflow-hidden",e),...a,children:[r.jsx(n.l_,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(s,{}),r.jsx(n.Ns,{})]}));d.displayName=n.fC.displayName;let s=o.forwardRef(({className:e,orientation:t="vertical",...a},o)=>r.jsx(n.gb,{ref:o,orientation:t,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:r.jsx(n.q4,{className:"relative flex-1 rounded-full bg-border"})}));s.displayName=n.gb.displayName},72388:(e,t,a)=>{a.d(t,{Bw:()=>f,Ph:()=>l,Ql:()=>w,i4:()=>p,ki:()=>u});var r=a(62901),o=a(24383),n=a(28012),i=a(7259),d=a(26026),s=a(85453),c=a(68637);let l=n.fC;n.ZA;let u=n.B4,p=o.forwardRef(({className:e,children:t,...a},o)=>(0,r.jsxs)(n.xz,{ref:o,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,r.jsx(n.JO,{asChild:!0,children:r.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=n.xz.displayName;let m=o.forwardRef(({className:e,...t},a)=>r.jsx(n.u_,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(d.Z,{className:"h-4 w-4"})}));m.displayName=n.u_.displayName;let y=o.forwardRef(({className:e,...t},a)=>r.jsx(n.$G,{ref:a,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(i.Z,{className:"h-4 w-4"})}));y.displayName=n.$G.displayName;let f=o.forwardRef(({className:e,children:t,position:a="popper",...o},i)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...o,children:[r.jsx(m,{}),r.jsx(n.l_,{className:(0,c.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(y,{})]})}));f.displayName=n.VY.displayName,o.forwardRef(({className:e,...t},a)=>r.jsx(n.__,{ref:a,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n.__.displayName;let w=o.forwardRef(({className:e,children:t,...a},o)=>(0,r.jsxs)(n.ck,{ref:o,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(s.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:t})]}));w.displayName=n.ck.displayName,o.forwardRef(({className:e,...t},a)=>r.jsx(n.Z0,{ref:a,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},83875:(e,t,a)=>{a.d(t,{Ri:()=>r,x8:()=>o});let r=[{id:1,name:"GLUTEN",description:"Ziarna zb\xf3Å¼ zawierajÄ…ce GLUTEN (pszenica, Å¼yto, jÄ™czmieÅ„, owies, orkisz, kamut) oraz produkty pochodne"},{id:2,name:"SKORUPIAKI",description:"SKORUPIAKI i produkty pochodne"},{id:3,name:"JAJA",description:"JAJA i produkty pochodne"},{id:4,name:"RYBY",description:"RYBY i produkty pochodne"},{id:5,name:"ORZESZKI ZIEMNE",description:"ORZESZKI ZIEMNE (arachidowe) i produkty pochodne"},{id:6,name:"SOJA",description:"SOJA i produkty pochodne"},{id:7,name:"MLEKO",description:"MLEKO i produkty pochodne (Å‚Ä…cznie z laktozÄ…)"},{id:8,name:"ORZECHY",description:"ORZECHY (migdaÅ‚y, laskowe, wÅ‚oskie, nerkowca, pekan, brazylijskie, pistacje, makadamia) i produkty pochodne"},{id:9,name:"SELER",description:"SELER i produkty pochodne"},{id:10,name:"GORCZYCA",description:"GORCZYCA i produkty pochodne"},{id:11,name:"SEZAM",description:"NASIONA SEZAMU i produkty pochodne"},{id:12,name:"DWUTLENEK SIARKI",description:"DWUTLENEK SIARKI i siarczyny w stÄ™Å¼eniach powyÅ¼ej 10 mg/kg lub 10 mg/l (SOâ‚‚)"},{id:13,name:"ÅUBIN",description:"ÅUBIN i produkty pochodne"},{id:14,name:"MIÄ˜CZAKI",description:"MIÄ˜CZAKI i produkty pochodne"}];function o(e){return e&&0!==e.length?e.sort((e,t)=>e-t).map(e=>`A:${e}`).join(", "):""}},45302:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(71945).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},30808:(e,t,a)=>{a.d(t,{Z:()=>r});let r=(0,a(71945).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},74010:(e,t,a)=>{a.d(t,{I1:()=>u,Xp:()=>d,_X:()=>l,gk:()=>s,ry:()=>c,vQ:()=>p});var r=a(83178),o=a(12203),n=a(55315),i=a.n(n);async function d(){try{return await r._.product.findMany({orderBy:{name:"asc"},where:{NOT:{name:"Lp."}}})}catch(e){return console.error("Error fetching products:",e),[]}}async function s(e){try{return await r._.product.findUnique({where:{id:e},include:{transactions:{orderBy:{date:"asc"}}}})}catch(e){return console.error("Error fetching product:",e),null}}async function c(e){try{return await r._.$transaction(async t=>{let a=await t.product.create({data:{name:e.name,unit:e.unit,currentStock:e.initialStock,manufacturer:e.manufacturer,calories:e.calories,salt:e.salt,protein:e.protein,fat:e.fat,saturatedFat:e.saturatedFat,carbohydrates:e.carbohydrates,sugars:e.sugars,calcium:e.calcium,iron:e.iron,vitaminC:e.vitaminC}});return e.initialStock>0&&await t.transaction.create({data:{productId:a.id,date:new Date,document:"Stan poczÄ…tkowy",type:"INCOME",quantity:e.initialStock,balance:e.initialStock}}),a})}catch(e){throw console.error("Error creating product:",e),e}}async function l(e,t){try{return await r._.$transaction(async a=>{let r=await a.product.findUnique({where:{id:e}});if(!r)throw Error("Product not found");let o=r.currentStock;if("INCOME"===t.type?o+=t.quantity:o-=t.quantity,o<0)throw Error("NiewystarczajÄ…cy stan magazynowy");let n=await a.transaction.create({data:{productId:e,date:t.date,document:t.document,type:t.type,quantity:t.quantity,balance:o}});return await a.product.update({where:{id:e},data:{currentStock:o}}),n})}catch(e){throw console.error("Error creating transaction:",e),e}}async function u(e){try{return await r._.$transaction(async t=>{let a=await t.transaction.findMany({where:{productId:e},orderBy:{date:"asc"}}),r=0;for(let e of a)"INCOME"===e.type?r+=e.quantity:r-=e.quantity,await t.transaction.update({where:{id:e.id},data:{balance:r}});return await t.product.update({where:{id:e},data:{currentStock:r}}),r})}catch(e){throw console.error("Error recalculating balances:",e),e}}async function p(){try{console.log("\uD83C\uDF31 Rozpoczynam import danych z pliku Excel...");let e=i().join(process.cwd(),"data","Kartoteka_Magazynowa_W_Malej_Kuchni.xlsx"),t=o.pJ(e);console.log("\uD83D\uDCCA Znalezione arkusze:",t.SheetNames);let a=t.SheetNames.find(e=>e.includes("Lista Produkt\xf3w")||e.includes("Arkusz1")||e===t.SheetNames[0])||t.SheetNames[0];console.log(`ğŸ“‹ Przetwarzam gÅ‚\xf3wny arkusz: ${a}`);let n=t.Sheets[a],d=o.P6.sheet_to_json(n);console.log(`ğŸ“¦ Znaleziono ${d.length} produkt\xf3w`);for(let e=0;e<d.length;e++){let n=d[e],i=n["Nazwa Produktu"]||n["Nazwa produktu"]||n.Nazwa||n["Product Name"]||n.Name||n.nazwa||Object.values(n).find(e=>"string"==typeof e&&e.length>2),s=n["Jednostka Miary"]||n["Jednostka miary"]||n.Jednostka||n.Unit||n.jednostka||"szt",c=parseFloat(n["Aktualny Stan"]||n.Stan||n.Stock||n.stan||"0")||0;if(!i){console.log(`âš ï¸  PominiÄ™to wiersz ${e+1} - brak nazwy produktu`);continue}console.log(`â• DodajÄ™ produkt: ${i} (${s}, stan: ${c})`);let l=await r._.product.create({data:{name:String(i).trim(),unit:String(s).trim(),currentStock:c}}),u=t.SheetNames.find(e=>e.includes(String(i))||String(i).includes(e)||e===String(i));if(u&&u!==a){console.log(`ğŸ“ˆ Przetwarzam transakcje dla produktu z arkusza: ${u}`);let e=t.Sheets[u],a=o.P6.sheet_to_json(e),n=0;for(let e of a){let t=e.Data||e.Date||new Date,a=e.Dokument||e.Document||"Import",o=parseFloat(e["Przych\xf3d"]||e.Income||"0")||0,i=parseFloat(e["Rozch\xf3d"]||e.Outcome||"0")||0,d=parseFloat(e.Saldo||e.Balance||"0")||0;0!==d?n=d:n+=o-i,o>0&&await r._.transaction.create({data:{productId:l.id,date:new Date(t),document:String(a),type:"INCOME",quantity:o,balance:n}}),i>0&&await r._.transaction.create({data:{productId:l.id,date:new Date(t),document:String(a),type:"OUTCOME",quantity:i,balance:n}})}n!==c&&await r._.product.update({where:{id:l.id},data:{currentStock:n}}),console.log(`âœ… Zaimportowano ${a.length} transakcji dla produktu ${i}`)}else c>0&&await r._.transaction.create({data:{productId:l.id,date:new Date,document:"Stan poczÄ…tkowy",type:"INCOME",quantity:c,balance:c}})}let s=await r._.product.count(),c=await r._.transaction.count();console.log(`ğŸ‰ Import zakoÅ„czony pomyÅ›lnie!`),console.log(`ğŸ“¦ Zaimportowano ${s} produkt\xf3w`),console.log(`ğŸ“ˆ Zaimportowano ${c} transakcji`)}catch(e){throw console.error("âŒ BÅ‚Ä…d podczas importu:",e),e}}}};