(()=>{var e={};e.id=1268,e.ids=[1268],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},61272:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c}),s(15287),s(61262),s(71363);var t=s(36576),r=s(72007),l=s(21818),n=s.n(l),i=s(88897),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(a,d);let c=["",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,15287)),"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/inventory/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,61262)),"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,71363,23)),"next/dist/client/components/not-found-error"]}],o=["/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/inventory/page.tsx"],m="/inventory/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/inventory/page",pathname:"/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},77718:(e,a,s)=>{Promise.resolve().then(s.bind(s,79641))},40198:(e,a,s)=>{"use strict";s.d(a,{BackupManager:()=>h});var t=s(62901),r=s(24383),l=s(45874),n=s(65923),i=s(14573),d=s(21391),c=s(7070),o=s(4795),m=s(43921),x=s(1447),u=s(26610);function h(){let[e,a]=(0,r.useState)([]),[s,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[y,j]=(0,r.useState)(null),[b,v]=(0,r.useState)(!1),w=async()=>{try{let e=await fetch("/api/backups");if(e.ok){let s=await e.json();a(s)}}catch(e){console.error("Error fetching backups:",e)}},f=async()=>{h(!0);try{(await fetch("/api/backups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:"Ręczny backup"})})).ok?(m.A.success("Backup utworzony pomyślnie"),w()):m.A.error("Błąd podczas tworzenia backupu")}catch(e){console.error("Error creating backup:",e),m.A.error("Błąd podczas tworzenia backupu")}finally{h(!1)}},N=async()=>{if(y){h(!0),v(!1);try{(await fetch("/api/backups/restore",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({backupId:y})})).ok?(m.A.success("Dane zostały przywr\xf3cone pomyślnie"),g(!1),window.location.reload()):m.A.error("Błąd podczas przywracania danych")}catch(e){console.error("Error restoring backup:",e),m.A.error("Błąd podczas przywracania danych")}finally{h(!1),j(null)}}},k=e=>{j(e),v(!0)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.Vq,{open:p,onOpenChange:g,children:[t.jsx(n.hg,{asChild:!0,children:(0,t.jsxs)(l.z,{variant:"outline",size:"sm",children:[t.jsx(d.Z,{className:"w-4 h-4 mr-2"}),"Historia zmian"]})}),(0,t.jsxs)(n.cZ,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,t.jsxs)(n.fK,{children:[t.jsx(n.$N,{children:"Historia zmian i backupy"}),t.jsx(n.Be,{children:"Przeglądaj historię zmian i przywracaj poprzednie stany systemu"})]}),(0,t.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Znaleziono ",e.length," zapisanych stan\xf3w"]}),(0,t.jsxs)(l.z,{onClick:f,disabled:s,size:"sm",children:[t.jsx(c.Z,{className:"w-4 h-4 mr-2"}),"Utw\xf3rz backup teraz"]})]}),t.jsx("div",{className:"border rounded-lg divide-y",children:0===e.length?(0,t.jsxs)("div",{className:"p-8 text-center text-muted-foreground",children:[t.jsx(c.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),t.jsx("p",{children:"Brak zapisanych backup\xf3w"})]}):e.map((e,a)=>t.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(d.Z,{className:"w-5 h-5 text-blue-600"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:(0,x.WU)(new Date(e.createdAt),"dd MMMM yyyy, HH:mm:ss",{locale:u.pl})}),t.jsx("p",{className:"text-sm text-muted-foreground",children:e.description||"Automatyczny backup"})]})]}),0===a&&t.jsx("span",{className:"inline-block mt-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Najnowszy"})]}),(0,t.jsxs)(l.z,{onClick:()=>k(e.id),disabled:s,variant:"outline",size:"sm",children:[t.jsx(o.Z,{className:"w-4 h-4 mr-2"}),"Przywr\xf3ć"]})]})},e.id))})]})]})]}),t.jsx(i.aR,{open:b,onOpenChange:v,children:(0,t.jsxs)(i._T,{children:[(0,t.jsxs)(i.fY,{children:[t.jsx(i.f$,{children:"Czy na pewno chcesz przywr\xf3cić ten backup?"}),t.jsx(i.yT,{children:"Ta akcja nadpisze wszystkie obecne dane i przywr\xf3ci stan z wybranego backupu. Przed przywr\xf3ceniem zostanie utworzony backup obecnego stanu."})]}),(0,t.jsxs)(i.xo,{children:[t.jsx(i.le,{children:"Anuluj"}),t.jsx(i.OL,{onClick:N,children:"Przywr\xf3ć backup"})]})]})})]})}},79641:(e,a,s)=>{"use strict";s.d(a,{InventoryPageClient:()=>I});var t=s(62901),r=s(24383),l=s(84374),n=s(71945);let i=(0,n.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),d=(0,n.Z)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),c=(0,n.Z)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);var o=s(21680),m=s(30808),x=s(45302),u=s(90891),h=s(83875);function p({product:e}){let a=[{key:"K",label:"Kalorie",value:e.calories},{key:"B",label:"Białko",value:e.protein},{key:"T",label:"Tłuszcz",value:e.fat},{key:"W",label:"Węglowodany",value:e.carbohydrates},{key:"Ca",label:"Wapń",value:e.calcium},{key:"Fe",label:"Żelazo",value:e.iron},{key:"C",label:"Witamina C",value:e.vitaminC}];return t.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:a.map(({key:e,label:a,value:s})=>{let r=null!=s&&s>0;return t.jsx("div",{title:`${a}: ${r?"uzupełnione":"brak danych"}`,className:`inline-flex items-center justify-center px-1.5 py-0.5 rounded text-xs font-semibold border ${r?"bg-green-100 text-green-700 border-green-300":"bg-red-100 text-red-700 border-red-300"}`,style:{minWidth:"Ca"===e||"Fe"===e?"26px":"18px"},children:e},e)})})}function g({products:e}){return e&&0!==e.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[t.jsx("div",{className:"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 flex items-center space-x-2",children:[t.jsx(i,{className:"w-4 h-4 sm:w-5 sm:h-5"}),t.jsx("span",{children:"Lista Produkt\xf3w"})]})}),t.jsx("div",{className:"hidden sm:block overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nazwa Produktu"}),t.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Jedn."}),t.jsx("th",{className:"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-28",children:"Stan"}),t.jsx("th",{className:"px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-12",children:"St."}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-24",children:"Alergeny"}),t.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Wartości Odżywcze"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,a)=>{let s=e?.allergens&&e.allergens.length>0;return(0,t.jsxs)(u.E.tr,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:0},className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>window.location.href=`/product/${e?.id||""}`,children:[t.jsx("td",{className:"px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-8 w-8 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:t.jsx(i,{className:"w-4 h-4 text-white"})})}),t.jsx("div",{className:"min-w-0",children:(0,t.jsxs)("div",{className:`text-sm text-gray-900 ${s?"font-bold":"font-medium"}`,style:{color:"#111827"},children:[e?.name||"Nieznany produkt",e?.manufacturer&&(0,t.jsxs)("span",{className:"text-gray-700 font-normal text-xs",style:{color:"#374151"},children:[" - ",e.manufacturer]})]})})]})}),t.jsx("td",{className:"px-3 py-3 text-center",children:t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-700 text-white border border-gray-800",children:e?.unit||"szt"})}),t.jsx("td",{className:"px-3 py-3 text-right",children:t.jsx("div",{className:"text-sm font-medium text-gray-900",style:{color:"#111827"},children:(e?.currentStock??0).toFixed(2)})}),t.jsx("td",{className:"px-2 py-3 text-center",children:(e?.currentStock??0)>0?t.jsx("div",{title:"Na stanie",children:t.jsx(d,{className:"w-5 h-5 text-green-600 mx-auto"})}):t.jsx("div",{title:"Brak stanu",children:t.jsx(c,{className:"w-5 h-5 text-red-600 mx-auto"})})}),t.jsx("td",{className:"px-3 py-3",children:e?.allergens&&e.allergens.length>0?(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx(o.Z,{className:"w-4 h-4 text-orange-600 flex-shrink-0"}),t.jsx("span",{className:"text-xs font-medium text-gray-900",style:{color:"#111827"},children:(0,h.x8)(e.allergens)})]}):t.jsx("span",{className:"text-xs text-gray-500",children:"-"})}),t.jsx("td",{className:"px-3 py-3",children:t.jsx(p,{product:e})})]},e?.id||`product-${a}`)})})]})}),t.jsx("div",{className:"sm:hidden divide-y divide-gray-200",children:e.map((e,a)=>{let s=e?.allergens&&e.allergens.length>0;return(0,t.jsxs)(u.E.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},transition:{duration:0},className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>window.location.href=`/product/${e?.id||""}`,children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"h-12 w-12 rounded-lg bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center",children:t.jsx(i,{className:"w-6 h-6 text-white"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:`text-sm text-gray-900 ${s?"font-bold":"font-medium"}`,style:{color:"#111827"},children:[e?.name||"Nieznany produkt",e?.manufacturer&&(0,t.jsxs)("span",{className:"text-gray-700 font-normal text-xs",style:{color:"#374151"},children:[" - ",e.manufacturer]})]}),t.jsx("div",{className:"mt-1 flex items-center gap-2",children:t.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-700 text-white border border-gray-800",children:e?.unit||"szt"})})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"text-left",children:[t.jsx("div",{className:"text-xs text-gray-700 font-medium",style:{color:"#374151"},children:"Aktualny stan"}),(0,t.jsxs)("div",{className:"text-sm font-medium text-gray-900",style:{color:"#111827"},children:[(e?.currentStock??0).toFixed(2)," ",e?.unit||"szt"]})]}),t.jsx("div",{children:(e?.currentStock??0)>0?(0,t.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-600 text-white border border-green-700",children:[t.jsx(m.Z,{className:"w-3 h-3 mr-1"}),"Na stanie"]}):(0,t.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-red-600 text-white border border-red-700",children:[t.jsx(x.Z,{className:"w-3 h-3 mr-1"}),"Brak"]})})]}),(0,t.jsxs)("div",{className:"mb-2",children:[t.jsx("div",{className:"text-xs text-gray-700 font-medium mb-1",style:{color:"#374151"},children:"Wartości odżywcze"}),t.jsx(p,{product:e})]}),e?.allergens&&e.allergens.length>0&&t.jsx("div",{className:"pt-2 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[t.jsx(o.Z,{className:"w-4 h-4 text-orange-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{children:[t.jsx("div",{className:"text-xs text-gray-700 font-medium",style:{color:"#374151"},children:"Alergeny"}),t.jsx("div",{className:"text-xs font-medium text-gray-900 mt-0.5",style:{color:"#111827"},children:(0,h.x8)(e.allergens)})]})]})})]},e?.id||`product-mobile-${a}`)})})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-12 text-center",children:[t.jsx(i,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brak produkt\xf3w"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"Nie znaleziono żadnych produkt\xf3w w magazynie."})]})}var y=s(65923),j=s(45874),b=s(250),v=s(82657),w=s(72388),f=s(24279),N=s(63234),k=s(35825),z=s(43921);let C=[{value:"kg",label:"kg"},{value:"szt",label:"szt"},{value:"l",label:"l"},{value:"opak",label:"opak"},{value:"g",label:"g"},{value:"ml",label:"ml"},{value:"inne",label:"inne"}];function S({isOpen:e,onClose:a,initialName:s=""}){let[n,d]=(0,r.useState)({name:s,unit:"szt",manufacturer:"",initialStock:"0",calories:"",salt:"",protein:"",fat:"",saturatedFat:"",carbohydrates:"",sugars:"",calcium:"",iron:"",vitaminC:"",allergens:[]}),[c,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)({}),u=(0,l.useRouter)(),p=()=>{let e={};n.name?.trim()||(e.name="Nazwa produktu jest wymagana"),n.unit||(e.unit="Jednostka miary jest wymagana");let a=parseFloat(n.initialStock);return(isNaN(a)||a<0)&&(e.initialStock="Stan początkowy musi być liczbą nie mniejszą od 0"),x(e),0===Object.keys(e).length},g=e=>{d(a=>{let s=a.allergens.includes(e)?a.allergens.filter(a=>a!==e):[...a.allergens,e];return{...a,allergens:s}})},S=async e=>{if(e.preventDefault(),p()){o(!0);try{let e={name:n.name.trim(),unit:n.unit,manufacturer:n.manufacturer||null,initialStock:parseFloat(n.initialStock),calories:n.calories?parseFloat(n.calories):null,salt:n.salt?parseFloat(n.salt):null,protein:n.protein?parseFloat(n.protein):null,fat:n.fat?parseFloat(n.fat):null,saturatedFat:n.saturatedFat?parseFloat(n.saturatedFat):null,carbohydrates:n.carbohydrates?parseFloat(n.carbohydrates):null,sugars:n.sugars?parseFloat(n.sugars):null,calcium:n.calcium?parseFloat(n.calcium):null,iron:n.iron?parseFloat(n.iron):null,vitaminC:n.vitaminC?parseFloat(n.vitaminC):null,allergens:n.allergens},s=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.error||"Błąd podczas dodawania produktu")}await s.json(),z.A.success("Produkt został dodany pomyślnie!"),d({name:"",unit:"szt",manufacturer:"",initialStock:"0",calories:"",salt:"",protein:"",fat:"",saturatedFat:"",carbohydrates:"",sugars:"",calcium:"",iron:"",vitaminC:"",allergens:[]}),x({}),a(),u.refresh()}catch(e){console.error("Error adding product:",e),z.A.error(e instanceof Error?e.message:"Błąd podczas dodawania produktu")}finally{o(!1)}}},_=()=>{c||(d({name:"",unit:"szt",manufacturer:"",initialStock:"0",calories:"",salt:"",protein:"",fat:"",saturatedFat:"",carbohydrates:"",sugars:"",calcium:"",iron:"",vitaminC:"",allergens:[]}),x({}),a())};return t.jsx(y.Vq,{open:e,onOpenChange:_,children:(0,t.jsxs)(y.cZ,{className:"sm:max-w-[600px] max-h-[90vh]",children:[(0,t.jsxs)(y.fK,{children:[(0,t.jsxs)(y.$N,{className:"flex items-center space-x-2",children:[t.jsx(i,{className:"w-5 h-5 text-blue-600"}),t.jsx("span",{children:"Dodaj nowy produkt"})]}),t.jsx(y.Be,{children:"Wypełnij podstawowe informacje i wartości odżywcze produktu."})]}),t.jsx(f.x,{className:"max-h-[60vh] pr-4",children:t.jsx("form",{onSubmit:S,id:"add-product-form",children:(0,t.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:"Podstawowe informacje"}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"name",children:"Nazwa produktu *"}),t.jsx(b.I,{id:"name",value:n.name,onChange:e=>d({...n,name:e.target.value}),placeholder:"Np. Mąka pszenna",className:m.name?"border-red-300":"",disabled:c,required:!0}),m.name&&(0,t.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[t.jsx(k.Z,{className:"w-4 h-4"}),t.jsx("span",{children:m.name})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"unit",children:"Jednostka miary *"}),(0,t.jsxs)(w.Ph,{value:n.unit,onValueChange:e=>d({...n,unit:e}),disabled:c,required:!0,children:[t.jsx(w.i4,{className:m.unit?"border-red-300":"",children:t.jsx(w.ki,{placeholder:"Wybierz jednostkę"})}),t.jsx(w.Bw,{children:C.map(e=>t.jsx(w.Ql,{value:e.value,children:e.label},e.value))})]}),m.unit&&(0,t.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[t.jsx(k.Z,{className:"w-4 h-4"}),t.jsx("span",{children:m.unit})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"manufacturer",children:"Nazwa producenta"}),t.jsx(b.I,{id:"manufacturer",value:n.manufacturer,onChange:e=>d({...n,manufacturer:e.target.value}),placeholder:"Np. Młyny Polskie",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"initialStock",children:"Stan początkowy *"}),t.jsx(b.I,{id:"initialStock",type:"number",step:"0.01",min:"0",placeholder:"0.00",value:n.initialStock,onChange:e=>d({...n,initialStock:e.target.value}),className:m.initialStock?"border-red-300":"",disabled:c}),m.initialStock&&(0,t.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[t.jsx(k.Z,{className:"w-4 h-4"}),t.jsx("span",{children:m.initialStock})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-sm text-gray-700",children:["Wartości odżywcze (na 100","ml"===n.unit||"l"===n.unit?" ml":" g",")"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"calories",children:"Kalorie (kcal)"}),t.jsx(b.I,{id:"calories",type:"number",step:"0.01",min:"0",value:n.calories,onChange:e=>d({...n,calories:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"salt",children:"S\xf3l (g)"}),t.jsx(b.I,{id:"salt",type:"number",step:"0.01",min:"0",value:n.salt,onChange:e=>d({...n,salt:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"protein",children:"Białko (g)"}),t.jsx(b.I,{id:"protein",type:"number",step:"0.01",min:"0",value:n.protein,onChange:e=>d({...n,protein:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2 col-span-2",children:[t.jsx(v._,{htmlFor:"fat",children:"Tłuszcz (g)"}),t.jsx(b.I,{id:"fat",type:"number",step:"0.01",min:"0",value:n.fat,onChange:e=>d({...n,fat:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2 col-span-2 pl-4",children:[t.jsx(v._,{htmlFor:"saturatedFat",className:"text-sm text-muted-foreground",children:"w tym kwasy tłuszczowe nasycone (g)"}),t.jsx(b.I,{id:"saturatedFat",type:"number",step:"0.01",min:"0",value:n.saturatedFat,onChange:e=>d({...n,saturatedFat:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2 col-span-2",children:[t.jsx(v._,{htmlFor:"carbohydrates",children:"Węglowodany (g)"}),t.jsx(b.I,{id:"carbohydrates",type:"number",step:"0.01",min:"0",value:n.carbohydrates,onChange:e=>d({...n,carbohydrates:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2 col-span-2 pl-4",children:[t.jsx(v._,{htmlFor:"sugars",className:"text-sm text-muted-foreground",children:"w tym cukry (g)"}),t.jsx(b.I,{id:"sugars",type:"number",step:"0.01",min:"0",value:n.sugars,onChange:e=>d({...n,sugars:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"calcium",children:"Wapń (mg)"}),t.jsx(b.I,{id:"calcium",type:"number",step:"0.01",min:"0",value:n.calcium,onChange:e=>d({...n,calcium:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"iron",children:"Żelazo (mg)"}),t.jsx(b.I,{id:"iron",type:"number",step:"0.01",min:"0",value:n.iron,onChange:e=>d({...n,iron:e.target.value}),placeholder:"0",disabled:c})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[t.jsx(v._,{htmlFor:"vitaminC",children:"Witamina C (mg)"}),t.jsx(b.I,{id:"vitaminC",type:"number",step:"0.01",min:"0",value:n.vitaminC,onChange:e=>d({...n,vitaminC:e.target.value}),placeholder:"0",disabled:c})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:"Alergeny"}),t.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Wybierz alergeny, kt\xf3re występują w tym produkcie (pole opcjonalne)"}),t.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[200px] overflow-y-auto border rounded-md p-3",children:h.Ri.map(e=>(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[t.jsx(N.X,{id:`allergen-${e.id}`,checked:n.allergens.includes(e.id),onCheckedChange:()=>g(e.id),disabled:c}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(v._,{htmlFor:`allergen-${e.id}`,className:"text-sm font-medium leading-none cursor-pointer",children:["A:",e.id," - ",e.name]}),t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},e.id))}),n.allergens.length>0&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,t.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["Wybrane alergeny: ",n.allergens.sort((e,a)=>e-a).map(e=>`A:${e}`).join(", ")]})})]})]})})}),(0,t.jsxs)("div",{className:"flex space-x-3 pt-4",children:[t.jsx(j.z,{type:"button",variant:"outline",onClick:_,disabled:c,className:"flex-1",children:"Anuluj"}),t.jsx(j.z,{type:"submit",form:"add-product-form",className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:c,children:c?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Dodawanie..."})]}):"Dodaj produkt"})]})]})})}var _=s(68734);function F(){let[e,a]=(0,r.useState)(!1),s=async()=>{a(!0);try{let e=await fetch("/api/export",{method:"GET"});if(!e.ok)throw Error("Błąd podczas eksportu danych");let a=await e.blob(),s=window.URL.createObjectURL(a),t=document.createElement("a");t.href=s;let r=new Date().toISOString().split("T")[0];t.download=`kartoteka_magazynowa_${r}.xlsx`,document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(s),z.A.success("Plik Excel został pobrany pomyślnie!")}catch(e){console.error("Export error:",e),z.A.error("Błąd podczas eksportu danych")}finally{a(!1)}};return t.jsx(j.z,{onClick:s,variant:"outline",disabled:e,className:"border-gray-300 hover:bg-gray-50 px-6 py-2.5 rounded-lg font-medium shadow-sm hover:shadow-md transition-all duration-200",children:e?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),t.jsx("span",{children:"Eksportowanie..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(_.Z,{className:"w-5 h-5 mr-2"}),"Eksportuj do Excel"]})})}var P=s(91046);function A(){let[e,a]=(0,r.useState)(""),[s,n]=(0,r.useTransition)(),i=(0,l.useRouter)(),d=e=>{a(e),n(()=>{e?i.push(`/inventory?search=${encodeURIComponent(e)}`):i.push("/inventory")})};return(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx(P.Z,{className:"h-5 w-5 text-gray-400"})}),t.jsx(b.I,{type:"text",placeholder:"Szukaj produkt\xf3w...",value:e,onChange:e=>d(e.target.value),className:"pl-10 pr-4 py-2 w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:s}),s&&t.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]})}var Z=s(40198),B=s(69465),M=s(75909);let W=(0,n.Z)("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);var q=s(97718),E=s(62392);function I({products:e,searchQuery:a,addProductName:s}){(0,l.useRouter)();let[n,d]=(0,r.useState)(!1),[c,o]=(0,r.useState)("");return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx(E.default,{href:"/",children:(0,t.jsxs)(j.z,{variant:"ghost",className:"gap-2",children:[t.jsx(M.Z,{className:"w-4 h-4"}),"Powr\xf3t do menu gł\xf3wnego"]})}),t.jsx(B.LogoutButton,{})]}),(0,t.jsxs)("div",{className:"text-center space-y-4",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-blue-600 to-blue-700 text-white mb-4",children:t.jsx(W,{className:"w-8 h-8"})}),t.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Kartoteka Magazynowa"}),t.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Kompleksowe narzędzie do śledzenia stan\xf3w magazynowych i historii transakcji dla wszystkich produkt\xf3w w firmie."})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[t.jsx(A,{}),t.jsx("div",{className:"flex gap-3",children:(0,t.jsxs)(j.z,{onClick:()=>d(!0),className:"gap-2 bg-blue-600 hover:bg-blue-700",children:[t.jsx(q.Z,{className:"w-4 h-4"}),"Dodaj nowy produkt"]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:a?"Znaleziono produkt\xf3w":"Łączna liczba produkt\xf3w"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e?.length||0})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Produkty z dodatnim stanem"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e?.filter(e=>(e?.currentStock??0)>0)?.length||0})]})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-6 hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:t.jsx(i,{className:"w-6 h-6 text-yellow-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-gray-600",children:"Produkty bez stanu"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e?.filter(e=>(e?.currentStock??0)===0)?.length||0})]})]})})]}),t.jsx(g,{products:e||[]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center pt-4 pb-8",children:[t.jsx(Z.BackupManager,{}),t.jsx(F,{})]}),t.jsx(S,{isOpen:n,onClose:()=>{d(!1),o("")},initialName:c})]})}},69465:(e,a,s)=>{"use strict";s.d(a,{LogoutButton:()=>d});var t=s(62901),r=s(84374),l=s(45874),n=s(25650),i=s(43921);function d(){let e=(0,r.useRouter)(),a=async()=>{try{(await fetch("/api/auth/logout",{method:"POST"})).ok?(i.A.success("Wylogowano pomyślnie"),e.push("/login"),e.refresh()):i.A.error("Wystąpił błąd podczas wylogowywania")}catch(e){console.error("Błąd wylogowania:",e),i.A.error("Wystąpił błąd podczas wylogowywania")}};return(0,t.jsxs)(l.z,{onClick:a,variant:"outline",size:"sm",className:"gap-2",children:[t.jsx(n.Z,{className:"w-4 h-4"}),"Wyloguj"]})}},97718:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(71945).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},91046:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(71945).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},21680:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(71945).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},15287:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>i,dynamic:()=>n});var t=s(83537),r=s(74010);let l=(0,s(88895).createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/inventory-page-client.tsx#InventoryPageClient`),n="force-dynamic";async function i({searchParams:e}){let a=await (0,r.Xp)(),s=e.search?.toLowerCase()||"",n=s?a.filter(e=>e.name.toLowerCase().includes(s)||e.unit.toLowerCase().includes(s)):a;return t.jsx(l,{products:n||[],searchQuery:s,addProductName:e.add_product})}}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[4372,9405,7069,5972,2203,3443,8410,1475,4425,5044,576,5185,4946],()=>s(61272));module.exports=t})();