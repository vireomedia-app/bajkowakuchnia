(()=>{var e={};e.id=5240,e.ids=[5240],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},98667:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),s(56259),s(61262),s(71363);var r=s(36576),t=s(72007),n=s(21818),i=s.n(n),l=s(88897),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(a,d);let o=["",{children:["menu",{children:["meal-plans",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,56259)),"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/menu/meal-plans/new/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,61262)),"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/menu/meal-plans/new/page.tsx"],m="/menu/meal-plans/new/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/menu/meal-plans/new/page",pathname:"/menu/meal-plans/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},64439:(e,a,s)=>{Promise.resolve().then(s.bind(s,7583)),Promise.resolve().then(s.t.bind(s,95003,23))},7583:(e,a,s)=>{"use strict";s.d(a,{MealPlanCreator:()=>h});var r=s(62901),t=s(24383),n=s(84374),i=s(45874),l=s(250),d=s(82657),o=s(52),c=s(72388),m=s(23803),p=s(43921),u=s(38652);let x=(0,s(71945).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function h({standards:e}){let a=(0,n.useRouter)(),[s,h]=(0,t.useState)(!1),[f,j]=(0,t.useState)({name:"",weekNumber:"",season:"",description:"",standardsId:e[0]?.id||""}),y=async e=>{if(e.preventDefault(),!f.name.trim()){p.A.error("Podaj nazwę jadłospisu");return}h(!0);try{let e=await fetch("/api/meal-plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:f.name.trim(),weekNumber:f.weekNumber?parseInt(f.weekNumber):null,season:f.season||null,description:f.description.trim()||null,standardsId:f.standardsId||null})});if(!e.ok)throw Error("Failed to create meal plan");let s=await e.json();p.A.success("Jadłospis został utworzony"),a.push(`/menu/meal-plans/${s.id}`)}catch(e){console.error("Error creating meal plan:",e),p.A.error("Błąd podczas tworzenia jadłospisu")}finally{h(!1)}};return(0,r.jsxs)(m.Zb,{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsxs)(m.ll,{className:"flex items-center gap-2",children:[r.jsx(u.Z,{className:"w-5 h-5"}),"Podstawowe informacje"]}),r.jsx(m.SZ,{children:"Wypełnij dane nowego jadłospisu tygodniowego"})]}),r.jsx(m.aY,{children:(0,r.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"name",children:"Nazwa jadłospisu *"}),r.jsx(l.I,{id:"name",value:f.name,onChange:e=>j({...f,name:e.target.value}),placeholder:"Np. Tydzień 4 - Wiosna/Lato",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"weekNumber",children:"Numer tygodnia"}),r.jsx(l.I,{id:"weekNumber",type:"number",min:"1",max:"52",value:f.weekNumber,onChange:e=>j({...f,weekNumber:e.target.value}),placeholder:"1-52"})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"season",children:"Sezon"}),(0,r.jsxs)(c.Ph,{value:f.season,onValueChange:e=>j({...f,season:e}),children:[r.jsx(c.i4,{children:r.jsx(c.ki,{placeholder:"Wybierz sezon"})}),(0,r.jsxs)(c.Bw,{children:[r.jsx(c.Ql,{value:"SPRING",children:"Wiosna"}),r.jsx(c.Ql,{value:"SUMMER",children:"Lato"}),r.jsx(c.Ql,{value:"AUTUMN",children:"Jesień"}),r.jsx(c.Ql,{value:"WINTER",children:"Zima"})]})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"description",children:"Opis (opcjonalnie)"}),r.jsx(o.g,{id:"description",value:f.description,onChange:e=>j({...f,description:e.target.value}),placeholder:"Dodatkowe informacje o jadłospisie",rows:3})]}),e.length>0&&(0,r.jsxs)("div",{children:[r.jsx(d._,{htmlFor:"standards",children:"Normy żywieniowe"}),(0,r.jsxs)(c.Ph,{value:f.standardsId,onValueChange:e=>j({...f,standardsId:e}),children:[r.jsx(c.i4,{children:r.jsx(c.ki,{placeholder:"Wybierz normy"})}),r.jsx(c.Bw,{children:e.map(e=>r.jsx(c.Ql,{value:e.id,children:e.name},e.id))})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx(i.z,{type:"button",variant:"outline",onClick:()=>a.back(),disabled:s,children:"Anuluj"}),(0,r.jsxs)(i.z,{type:"submit",disabled:s,children:[s&&r.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),"Utw\xf3rz jadłospis"]})]})]})})]})}},82657:(e,a,s)=>{"use strict";s.d(a,{_:()=>o});var r=s(62901),t=s(24383),n=s(8388),i=s(47279),l=s(68637);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=t.forwardRef(({className:e,...a},s)=>r.jsx(n.f,{ref:s,className:(0,l.cn)(d(),e),...a}));o.displayName=n.f.displayName},72388:(e,a,s)=>{"use strict";s.d(a,{Bw:()=>h,Ph:()=>c,Ql:()=>f,i4:()=>p,ki:()=>m});var r=s(62901),t=s(24383),n=s(28012),i=s(7259),l=s(26026),d=s(85453),o=s(68637);let c=n.fC;n.ZA;let m=n.B4,p=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(n.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[a,r.jsx(n.JO,{asChild:!0,children:r.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=n.xz.displayName;let u=t.forwardRef(({className:e,...a},s)=>r.jsx(n.u_,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(l.Z,{className:"h-4 w-4"})}));u.displayName=n.u_.displayName;let x=t.forwardRef(({className:e,...a},s)=>r.jsx(n.$G,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",e),...a,children:r.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=n.$G.displayName;let h=t.forwardRef(({className:e,children:a,position:s="popper",...t},i)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:i,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...t,children:[r.jsx(u,{}),r.jsx(n.l_,{className:(0,o.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),r.jsx(x,{})]})}));h.displayName=n.VY.displayName,t.forwardRef(({className:e,...a},s)=>r.jsx(n.__,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...a})).displayName=n.__.displayName;let f=t.forwardRef(({className:e,children:a,...s},t)=>(0,r.jsxs)(n.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(d.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:a})]}));f.displayName=n.ck.displayName,t.forwardRef(({className:e,...a},s)=>r.jsx(n.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=n.Z0.displayName},52:(e,a,s)=>{"use strict";s.d(a,{g:()=>i});var r=s(62901),t=s(24383),n=s(68637);let i=t.forwardRef(({className:e,...a},s)=>r.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...a}));i.displayName="Textarea"},56259:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var r=s(83537),t=s(85168),n=s(81331),i=s(42662);let l=(0,s(88895).createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/meal-plan-creator.tsx#MealPlanCreator`);var d=s(83178);async function o(){try{return await d._.nutritionalStandards.findMany({orderBy:{createdAt:"desc"}})}catch(e){return console.error("Error fetching standards:",e),[]}}async function c(){let e=await o();return(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx(t.default,{href:"/menu/meal-plans",children:(0,r.jsxs)(n.z,{variant:"ghost",className:"gap-2",children:[r.jsx(i.Z,{className:"w-4 h-4"}),"Powr\xf3t do jadłospis\xf3w"]})}),(0,r.jsxs)("div",{className:"text-center space-y-4",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Nowy jadłospis tygodniowy"}),r.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Utw\xf3rz nowy plan żywieniowy na tydzień"})]}),r.jsx(l,{standards:e})]})}}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[4372,9405,7069,5972,3277,8410,3793],()=>s(98667));module.exports=r})();