"use strict";(()=>{var e={};e.id=8017,e.ids=[8017],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},99841:(e,r,a)=>{a.r(r),a.d(r,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var t={};a.r(t),a.d(t,{POST:()=>d});var i=a(79182),s=a(72007),o=a(56719),p=a(93442),n=a(83178);async function d(e,{params:r}){try{let a=await e.json(),t=await n._.mealPlanRecipe.create({data:{mealPlanMealId:r.mealId,recipeId:a.recipeId,servings:a.servings||1,order:a.order||0},include:{recipe:{include:{ingredients:{include:{product:!0}}}}}}),i={calories:0,protein:0,fat:0,saturatedFat:0,carbohydrates:0,sugars:0,salt:0,calcium:0,iron:0,vitaminC:0};return t.recipe&&t.recipe.ingredients.forEach(e=>{if(e.product){let r=e.quantity/100;i.calories+=(e.product.calories||0)*r,i.protein+=(e.product.protein||0)*r,i.fat+=(e.product.fat||0)*r,i.saturatedFat+=(e.product.saturatedFat||0)*r,i.carbohydrates+=(e.product.carbohydrates||0)*r,i.sugars+=(e.product.sugars||0)*r,i.salt+=(e.product.salt||0)*r,i.calcium+=(e.product.calcium||0)*r,i.iron+=(e.product.iron||0)*r,i.vitaminC+=(e.product.vitaminC||0)*r}}),p.NextResponse.json({...t,recipe:{...t.recipe,nutrition:i}})}catch(e){return console.error("Error adding recipe to meal:",e),p.NextResponse.json({error:"Błąd podczas dodawania receptury do posiłku"},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/meal-plans/[id]/meals/[mealId]/recipes/route",pathname:"/api/meal-plans/[id]/meals/[mealId]/recipes",filename:"route",bundlePath:"app/api/meal-plans/[id]/meals/[mealId]/recipes/route"},resolvedPagePath:"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/api/meal-plans/[id]/meals/[mealId]/recipes/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:u,staticGenerationAsyncStorage:l,serverHooks:m}=c,g="/api/meal-plans/[id]/meals/[mealId]/recipes/route";function h(){return(0,o.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},83178:(e,r,a)=>{a.d(r,{_:()=>i});var t=a(53524);let i=globalThis.prisma??new t.PrismaClient}};var r=require("../../../../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[4372,7609],()=>a(99841));module.exports=t})();