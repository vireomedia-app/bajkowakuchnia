"use strict";(()=>{var e={};e.id=2645,e.ids=[2645],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},77326:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var i={};t.r(i),t.d(i,{DELETE:()=>d,GET:()=>c,PATCH:()=>p});var a=t(79182),o=t(72007),n=t(56719),s=t(93442),u=t(83178);async function c(e,{params:r}){try{let e=await u._.recipe.findUnique({where:{id:r.id},include:{ingredients:{include:{product:!0}}}});if(!e)return s.NextResponse.json({error:"Recipe not found"},{status:404});let t={calories:0,protein:0,fat:0,saturatedFat:0,carbohydrates:0,sugars:0,salt:0,calcium:0,iron:0,vitaminC:0};return e.ingredients.forEach(e=>{if(e.product){let r=e.quantity/100;t.calories+=(e.product.calories||0)*r,t.protein+=(e.product.protein||0)*r,t.fat+=(e.product.fat||0)*r,t.saturatedFat+=(e.product.saturatedFat||0)*r,t.carbohydrates+=(e.product.carbohydrates||0)*r,t.sugars+=(e.product.sugars||0)*r,t.salt+=(e.product.salt||0)*r,t.calcium+=(e.product.calcium||0)*r,t.iron+=(e.product.iron||0)*r,t.vitaminC+=(e.product.vitaminC||0)*r}}),s.NextResponse.json({...e,nutrition:t})}catch(e){return console.error("Error fetching recipe:",e),s.NextResponse.json({error:"Failed to fetch recipe"},{status:500})}}async function p(e,{params:r}){try{let{name:t,description:i,servings:a,categories:o,ingredients:n}=await e.json();await u._.recipeIngredient.deleteMany({where:{recipeId:r.id}});let c=await u._.recipe.update({where:{id:r.id},data:{name:t,description:i,servings:a,categories:o||[],ingredients:{create:n.map(e=>({productId:e.productId||null,productName:e.productName,quantity:e.quantity,unit:e.unit}))}},include:{ingredients:{include:{product:!0}}}});return s.NextResponse.json(c)}catch(e){return console.error("Error updating recipe:",e),s.NextResponse.json({error:"Failed to update recipe"},{status:500})}}async function d(e,{params:r}){try{return await u._.recipe.delete({where:{id:r.id}}),s.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting recipe:",e),s.NextResponse.json({error:"Failed to delete recipe"},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/recipes/[id]/route",pathname:"/api/recipes/[id]",filename:"route",bundlePath:"app/api/recipes/[id]/route"},resolvedPagePath:"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/api/recipes/[id]/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:g}=l,x="/api/recipes/[id]/route";function f(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},83178:(e,r,t)=>{t.d(r,{_:()=>a});var i=t(53524);let a=globalThis.prisma??new i.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[4372,7609],()=>t(77326));module.exports=i})();