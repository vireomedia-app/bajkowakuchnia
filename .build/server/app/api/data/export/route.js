"use strict";(()=>{var e={};e.id=308,e.ids=[308],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},72118:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>m,staticGenerationAsyncStorage:()=>y});var n={};a.r(n),a.d(n,{GET:()=>l,dynamic:()=>p});var r=a(79182),o=a(72007),i=a(56719),s=a(93442),d=a(83178);let p="force-dynamic";async function l(){try{let[e,t,a,n,r,o,i,p,l]=await Promise.all([d._.product.findMany({orderBy:{createdAt:"asc"}}),d._.transaction.findMany({orderBy:{createdAt:"asc"}}),d._.recipe.findMany({orderBy:{createdAt:"asc"}}),d._.recipeIngredient.findMany(),d._.nutritionalStandards.findMany({orderBy:{createdAt:"asc"}}),d._.mealPlan.findMany({orderBy:{createdAt:"asc"}}),d._.mealPlanDay.findMany({orderBy:{createdAt:"asc"}}),d._.mealPlanMeal.findMany({orderBy:{createdAt:"asc"}}),d._.mealPlanRecipe.findMany({orderBy:{createdAt:"asc"}})]),c={version:"1.0",exportDate:new Date().toISOString(),data:{products:e,transactions:t,recipes:a,recipeIngredients:n,nutritionalStandards:r,mealPlans:o,mealPlanDays:i,mealPlanMeals:p,mealPlanRecipes:l},stats:{productsCount:e.length,transactionsCount:t.length,recipesCount:a.length,recipeIngredientsCount:n.length,nutritionalStandardsCount:r.length,mealPlansCount:o.length,mealPlanDaysCount:i.length,mealPlanMealsCount:p.length,mealPlanRecipesCount:l.length}},u=JSON.stringify(c,null,2),y=`kartoteka_full_export_${new Date().toISOString().split("T")[0]}.json`;return new s.NextResponse(u,{status:200,headers:{"Content-Type":"application/json","Content-Disposition":`attachment; filename="${y}"`}})}catch(e){return console.error("Error exporting data:",e),s.NextResponse.json({error:"Błąd podczas eksportowania danych"},{status:500})}}let c=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/data/export/route",pathname:"/api/data/export",filename:"route",bundlePath:"app/api/data/export/route"},resolvedPagePath:"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/api/data/export/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:u,staticGenerationAsyncStorage:y,serverHooks:m}=c,g="/api/data/export/route";function h(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:y})}},83178:(e,t,a)=>{a.d(t,{_:()=>r});var n=a(53524);let r=globalThis.prisma??new n.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[4372,7609],()=>a(72118));module.exports=n})();