"use strict";(()=>{var e={};e.id=8873,e.ids=[8873],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},18343:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>w,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var a={};s.r(a),s.d(a,{POST:()=>d});var r=s(79182),o=s(72007),n=s(56719),i=s(93442),u=s(53524),p=s(3390),c=s.n(p);let l=new u.PrismaClient;async function d(e){try{let{password:t}=await e.json(),s=await l.user.findFirst();if(!s)return i.NextResponse.json({success:!1,message:"Błąd konfiguracji systemu"},{status:500});if(!await c().compare(t,s.password))return i.NextResponse.json({success:!1,message:"Nieprawidłowe hasło"},{status:401});{let e=i.NextResponse.json({success:!0,message:"Zalogowano pomyślnie"});return e.cookies.set("auth_session",s.id,{httpOnly:!0,secure:!0,sameSite:"lax",maxAge:604800,path:"/"}),e}}catch(e){return console.error("Błąd logowania:",e),i.NextResponse.json({success:!1,message:"Wystąpił błąd podczas logowania"},{status:500})}finally{await l.$disconnect()}}let m=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/api/auth/login/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:x}=m,w="/api/auth/login/route";function y(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4372,7609,3390],()=>s(18343));module.exports=a})();