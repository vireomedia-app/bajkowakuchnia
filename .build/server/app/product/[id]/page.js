(()=>{var e={};e.id=188,e.ids=[188],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},55315:e=>{"use strict";e.exports=require("path")},21576:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(94792),a(61262),a(71363);var r=a(36576),s=a(72007),n=a(21818),i=a.n(n),l=a(88897),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o=["",{children:["product",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,94792)),"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/product/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,61262)),"/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,71363,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/app/product/[id]/page.tsx"],u="/product/[id]/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/product/[id]/page",pathname:"/product/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},22210:(e,t,a)=>{Promise.resolve().then(a.bind(a,68754)),Promise.resolve().then(a.bind(a,99175)),Promise.resolve().then(a.bind(a,58128)),Promise.resolve().then(a.bind(a,96113)),Promise.resolve().then(a.bind(a,70478))},68754:(e,t,a)=>{"use strict";a.d(t,{AddTransactionButton:()=>ey});var r=a(62901),s=a(24383),n=a(71945);let i=(0,n.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);var l=a(45874),d=a(84374),o=a(65923),c=a(250),u=a(82657),m=a(1940),x=a(56163),p=a(89291),h=a(74132),g=a(9453),y=a(50430),j=a(81609),f=a(98106),v=a(1861),b="rovingFocusGroup.onEntryFocus",N={bubbles:!1,cancelable:!0},k="RovingFocusGroup",[w,z,C]=(0,g.B)(k),[S,E]=(0,p.b)(k,[C]),[_,R]=S(k),F=s.forwardRef((e,t)=>(0,r.jsx)(w.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(w.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,r.jsx)(A,{...e,ref:t})})}));F.displayName=k;var A=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:a,orientation:n,loop:i=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:p=!1,...g}=e,y=s.useRef(null),k=(0,x.e)(t,y),w=(0,v.gm)(l),[C=null,S]=(0,f.T)({prop:d,defaultProp:o,onChange:c}),[E,R]=s.useState(!1),F=(0,j.W)(u),A=z(a),P=s.useRef(!1),[M,I]=s.useState(0);return s.useEffect(()=>{let e=y.current;if(e)return e.addEventListener(b,F),()=>e.removeEventListener(b,F)},[F]),(0,r.jsx)(_,{scope:a,orientation:n,dir:w,loop:i,currentTabStopId:C,onItemFocus:s.useCallback(e=>S(e),[S]),onItemShiftTab:s.useCallback(()=>R(!0),[]),onFocusableItemAdd:s.useCallback(()=>I(e=>e+1),[]),onFocusableItemRemove:s.useCallback(()=>I(e=>e-1),[]),children:(0,r.jsx)(h.WV.div,{tabIndex:E||0===M?-1:0,"data-orientation":n,...g,ref:k,style:{outline:"none",...e.style},onMouseDown:(0,m.M)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,m.M)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(b,N);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=A().filter(e=>e.focusable);O([e.find(e=>e.active),e.find(e=>e.id===C),...e].filter(Boolean).map(e=>e.ref.current),p)}}P.current=!1}),onBlur:(0,m.M)(e.onBlur,()=>R(!1))})})}),P="RovingFocusGroupItem",M=s.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:a,focusable:n=!0,active:i=!1,tabStopId:l,...d}=e,o=(0,y.M)(),c=l||o,u=R(P,a),x=u.currentTabStopId===c,p=z(a),{onFocusableItemAdd:g,onFocusableItemRemove:j}=u;return s.useEffect(()=>{if(n)return g(),()=>j()},[n,g,j]),(0,r.jsx)(w.ItemSlot,{scope:a,id:c,focusable:n,active:i,children:(0,r.jsx)(h.WV.span,{tabIndex:x?0:-1,"data-orientation":u.orientation,...d,ref:t,onMouseDown:(0,m.M)(e.onMouseDown,e=>{n?u.onItemFocus(c):e.preventDefault()}),onFocus:(0,m.M)(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:(0,m.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){u.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,a){var r;let s=(r=e.key,"rtl"!==a?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return I[s]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){"prev"===t&&a.reverse();let r=a.indexOf(e.currentTarget);a=u.loop?function(e,t){return e.map((a,r)=>e[(t+r)%e.length])}(a,r+1):a.slice(r+1)}setTimeout(()=>O(a))}})})})});M.displayName=P;var I={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function O(e,t=!1){let a=document.activeElement;for(let r of e)if(r===a||(r.focus({preventScroll:t}),document.activeElement!==a))return}var T=a(49209),Z=a(45666),q=a(52490),D="Radio",[B,L]=(0,p.b)(D),[$,K]=B(D),U=s.forwardRef((e,t)=>{let{__scopeRadio:a,name:n,checked:i=!1,required:l,disabled:d,value:o="on",onCheck:c,...u}=e,[p,g]=s.useState(null),y=(0,x.e)(t,e=>g(e)),j=s.useRef(!1),f=!p||!!p.closest("form");return(0,r.jsxs)($,{scope:a,checked:i,disabled:d,children:[(0,r.jsx)(h.WV.button,{type:"button",role:"radio","aria-checked":i,"data-state":H(i),"data-disabled":d?"":void 0,disabled:d,value:o,...u,ref:y,onClick:(0,m.M)(e.onClick,e=>{i||c?.(),f&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),f&&(0,r.jsx)(G,{control:p,bubbles:!j.current,name:n,value:o,checked:i,required:l,disabled:d,style:{transform:"translateX(-100%)"}})]})});U.displayName=D;var W="RadioIndicator",V=s.forwardRef((e,t)=>{let{__scopeRadio:a,forceMount:s,...n}=e,i=K(W,a);return(0,r.jsx)(q.z,{present:s||i.checked,children:(0,r.jsx)(h.WV.span,{"data-state":H(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});V.displayName=W;var G=e=>{let{control:t,checked:a,bubbles:n=!0,...i}=e,l=s.useRef(null),d=(0,Z.D)(a),o=(0,T.t)(t);return s.useEffect(()=>{let e=l.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==a&&t){let r=new Event("click",{bubbles:n});t.call(e,a),e.dispatchEvent(r)}},[d,a,n]),(0,r.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:l,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function H(e){return e?"checked":"unchecked"}var J=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Y="RadioGroup",[X,Q]=(0,p.b)(Y,[E,L]),ee=E(),et=L(),[ea,er]=X(Y),es=s.forwardRef((e,t)=>{let{__scopeRadioGroup:a,name:s,defaultValue:n,value:i,required:l=!1,disabled:d=!1,orientation:o,dir:c,loop:u=!0,onValueChange:m,...x}=e,p=ee(a),g=(0,v.gm)(c),[y,j]=(0,f.T)({prop:i,defaultProp:n,onChange:m});return(0,r.jsx)(ea,{scope:a,name:s,required:l,disabled:d,value:y,onValueChange:j,children:(0,r.jsx)(F,{asChild:!0,...p,orientation:o,dir:g,loop:u,children:(0,r.jsx)(h.WV.div,{role:"radiogroup","aria-required":l,"aria-orientation":o,"data-disabled":d?"":void 0,dir:g,...x,ref:t})})})});es.displayName=Y;var en="RadioGroupItem",ei=s.forwardRef((e,t)=>{let{__scopeRadioGroup:a,disabled:n,...i}=e,l=er(en,a),d=l.disabled||n,o=ee(a),c=et(a),u=s.useRef(null),p=(0,x.e)(t,u),h=l.value===i.value,g=s.useRef(!1);return s.useEffect(()=>{let e=e=>{J.includes(e.key)&&(g.current=!0)},t=()=>g.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,r.jsx)(M,{asChild:!0,...o,focusable:!d,active:h,children:(0,r.jsx)(U,{disabled:d,required:l.required,checked:h,...c,...i,name:l.name,ref:p,onCheck:()=>l.onValueChange(i.value),onKeyDown:(0,m.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,m.M)(i.onFocus,()=>{g.current&&u.current?.click()})})})});ei.displayName=en;var el=s.forwardRef((e,t)=>{let{__scopeRadioGroup:a,...s}=e,n=et(a);return(0,r.jsx)(V,{...n,...s,ref:t})});el.displayName="RadioGroupIndicator";let ed=(0,n.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var eo=a(68637);let ec=s.forwardRef(({className:e,...t},a)=>r.jsx(es,{className:(0,eo.cn)("grid gap-2",e),...t,ref:a}));ec.displayName=es.displayName;let eu=s.forwardRef(({className:e,...t},a)=>r.jsx(ei,{ref:a,className:(0,eo.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(el,{className:"flex items-center justify-center",children:r.jsx(ed,{className:"h-2.5 w-2.5 fill-current text-current"})})}));eu.displayName=ei.displayName;var em=a(35825),ex=a(30808),ep=a(45302),eh=a(43921);function eg({isOpen:e,onClose:t,productId:a}){let[n,m]=(0,s.useState)({date:new Date().toISOString().split("T")[0],document:"",type:"INCOME",quantity:"0"}),[x,p]=(0,s.useState)(!1),[h,g]=(0,s.useState)({}),[y,j]=(0,s.useState)(0),f=(0,d.useRouter)(),v=()=>{let e={};n.date||(e.date="Data jest wymagana"),n.document?.trim()||0!==y||(e.document='⚠️ Dodajesz transakcję bez numeru dokumentu. Kliknij ponownie "Dodaj transakcję" aby potwierdzić.');let t=parseFloat(n.quantity);return(isNaN(t)||t<=0)&&(e.quantity="Ilość musi być liczbą większą od 0"),g(e),0===Object.keys(e).length},b=async e=>{if(e.preventDefault(),!v()){n.document?.trim()||0!==y||j(e=>e+1);return}p(!0);try{let e=await fetch(`/api/products/${a}/transactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:n.date,document:n.document?.trim()||"",type:n.type,quantity:parseFloat(n.quantity)})});if(!e.ok){let t=await e.json();throw Error(t.error||"Błąd podczas dodawania transakcji")}await e.json(),eh.A.success("Transakcja została dodana pomyślnie!"),m({date:new Date().toISOString().split("T")[0],document:"",type:"INCOME",quantity:"0"}),g({}),j(0),t(),f.refresh()}catch(e){console.error("Error adding transaction:",e),eh.A.error(e instanceof Error?e.message:"Błąd podczas dodawania transakcji")}finally{p(!1)}},N=()=>{x||(m({date:new Date().toISOString().split("T")[0],document:"",type:"INCOME",quantity:"0"}),g({}),j(0),t())};return r.jsx(o.Vq,{open:e,onOpenChange:N,children:(0,r.jsxs)(o.cZ,{className:"sm:max-w-md",children:[r.jsx(o.fK,{children:(0,r.jsxs)(o.$N,{className:"flex items-center space-x-2",children:[r.jsx(i,{className:"w-5 h-5 text-green-600"}),r.jsx("span",{children:"Dodaj transakcję"})]})}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"date",children:"Data"}),r.jsx(c.I,{id:"date",type:"date",value:n.date,onChange:e=>m({...n,date:e.target.value}),className:h.date?"border-red-300 focus:border-red-500 focus:ring-red-500":"",disabled:x}),h.date&&(0,r.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(em.Z,{className:"w-4 h-4"}),r.jsx("span",{children:h.date})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"document",children:"Numer dokumentu"}),r.jsx(c.I,{id:"document",type:"text",placeholder:"Wprowadź numer dokumentu...",value:n.document,onChange:e=>m({...n,document:e.target.value}),className:h.document?"border-red-300 focus:border-red-500 focus:ring-red-500":"",disabled:x}),h.document&&(0,r.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(em.Z,{className:"w-4 h-4"}),r.jsx("span",{children:h.document})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx(u._,{children:"Typ transakcji"}),(0,r.jsxs)(ec,{value:n.type,onValueChange:e=>{m({...n,type:e}),g({}),j(0)},disabled:x,className:"flex space-x-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(eu,{value:"INCOME",id:"income"}),(0,r.jsxs)(u._,{htmlFor:"income",className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx(ex.Z,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"Przych\xf3d"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(eu,{value:"OUTCOME",id:"outcome"}),(0,r.jsxs)(u._,{htmlFor:"outcome",className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx(ep.Z,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{children:"Rozch\xf3d"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"quantity",children:"Ilość"}),r.jsx(c.I,{id:"quantity",type:"number",step:"0.5",min:"0",placeholder:"0.00",value:n.quantity,onChange:e=>m({...n,quantity:e.target.value}),className:h.quantity?"border-red-300 focus:border-red-500 focus:ring-red-500":"",disabled:x}),h.quantity&&(0,r.jsxs)("p",{className:"text-sm text-red-600 flex items-center space-x-1",children:[r.jsx(em.Z,{className:"w-4 h-4"}),r.jsx("span",{children:h.quantity})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[r.jsx(l.z,{type:"button",variant:"outline",onClick:N,disabled:x,className:"flex-1",children:"Anuluj"}),r.jsx(l.z,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",disabled:x,children:x?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),r.jsx("span",{children:"Dodawanie..."})]}):"Dodaj transakcję"})]})]})]})})}function ey({productId:e}){let[t,a]=(0,s.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.z,{onClick:()=>a(!0),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2.5 rounded-lg font-medium shadow-md hover:shadow-lg transition-all duration-200",children:[r.jsx(i,{className:"w-5 h-5 mr-2"}),"Dodaj transakcję"]}),r.jsx(eg,{isOpen:t,onClose:()=>a(!1),productId:e})]})}},99175:(e,t,a)=>{"use strict";a.d(t,{BackToListButton:()=>l});var r=a(62901),s=a(75909),n=a(45874),i=a(62392);function l(){return r.jsx(i.default,{href:"/inventory",children:(0,r.jsxs)(n.z,{variant:"outline",className:"border-gray-300 hover:bg-gray-50 shadow-sm hover:shadow-md transition-all duration-200",children:[r.jsx(s.Z,{className:"w-4 h-4 mr-2"}),"Powr\xf3t do listy"]})})}},58128:(e,t,a)=>{"use strict";a.d(t,{DeleteProductButton:()=>c});var r=a(62901),s=a(24383),n=a(84374),i=a(45874),l=a(71028),d=a(14573),o=a(43921);function c({product:e}){let[t,a]=(0,s.useState)(!1),[c,u]=(0,s.useState)(!1),m=(0,n.useRouter)(),x=async()=>{u(!0);try{if(!(await fetch(`/api/products/${e.id}`,{method:"DELETE"})).ok)throw Error("Nie udało się usunąć produktu");o.A.success("Produkt został usunięty"),m.push("/"),m.refresh()}catch(e){o.A.error("Błąd podczas usuwania produktu"),console.error(e)}finally{u(!1),a(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.z,{onClick:()=>a(!0),variant:"destructive",size:"sm",className:"gap-2",children:[r.jsx(l.Z,{className:"h-4 w-4"}),"Usuń produkt"]}),r.jsx(d.aR,{open:t,onOpenChange:a,children:(0,r.jsxs)(d._T,{children:[(0,r.jsxs)(d.fY,{children:[r.jsx(d.f$,{children:"Czy na pewno chcesz usunąć ten produkt?"}),(0,r.jsxs)(d.yT,{children:["Ta operacja jest nieodwracalna. Produkt ",r.jsx("strong",{children:e.name})," oraz wszystkie jego transakcje zostaną trwale usunięte z systemu."]})]}),(0,r.jsxs)(d.xo,{children:[r.jsx(d.le,{disabled:c,children:"Anuluj"}),r.jsx(d.OL,{onClick:x,disabled:c,className:"bg-red-600 hover:bg-red-700",children:c?"Usuwanie...":"Tak, usuń produkt"})]})]})})]})}},96113:(e,t,a)=>{"use strict";a.d(t,{EditProductButton:()=>j});var r=a(62901),s=a(24383),n=a(45874),i=a(53275),l=a(84374),d=a(65923),o=a(250),c=a(82657),u=a(72388),m=a(24279),x=a(63234),p=a(83875),h=a(43921);let g=[{value:"kg",label:"kg"},{value:"szt",label:"szt"},{value:"l",label:"l"},{value:"opak",label:"opak"},{value:"g",label:"g"},{value:"ml",label:"ml"},{value:"inne",label:"inne"}];function y({open:e,onOpenChange:t,product:a}){let i=(0,l.useRouter)(),[y,j]=(0,s.useState)(!1),[f,v]=(0,s.useState)({name:a.name,unit:a.unit,manufacturer:a.manufacturer||"",calories:a.calories?.toString()||"",salt:a.salt?.toString()||"",protein:a.protein?.toString()||"",fat:a.fat?.toString()||"",saturatedFat:a.saturatedFat?.toString()||"",carbohydrates:a.carbohydrates?.toString()||"",sugars:a.sugars?.toString()||"",calcium:a.calcium?.toString()||"",iron:a.iron?.toString()||"",vitaminC:a.vitaminC?.toString()||"",allergens:a.allergens||[]}),b=e=>{v(t=>{let a=t.allergens.includes(e)?t.allergens.filter(t=>t!==e):[...t.allergens,e];return{...t,allergens:a}})},N=async e=>{e.preventDefault(),j(!0);try{let e={name:f.name,unit:f.unit,manufacturer:f.manufacturer||null,calories:f.calories?parseFloat(f.calories):null,salt:f.salt?parseFloat(f.salt):null,protein:f.protein?parseFloat(f.protein):null,fat:f.fat?parseFloat(f.fat):null,saturatedFat:f.saturatedFat?parseFloat(f.saturatedFat):null,carbohydrates:f.carbohydrates?parseFloat(f.carbohydrates):null,sugars:f.sugars?parseFloat(f.sugars):null,calcium:f.calcium?parseFloat(f.calcium):null,iron:f.iron?parseFloat(f.iron):null,vitaminC:f.vitaminC?parseFloat(f.vitaminC):null,allergens:f.allergens};if(!(await fetch(`/api/products/${a.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Nie udało się zaktualizować produktu");h.A.success("Produkt został zaktualizowany"),t(!1),i.refresh()}catch(e){h.A.error("Błąd podczas aktualizacji produktu"),console.error(e)}finally{j(!1)}};return r.jsx(d.Vq,{open:e,onOpenChange:t,children:(0,r.jsxs)(d.cZ,{className:"sm:max-w-[600px] max-h-[90vh]",children:[(0,r.jsxs)(d.fK,{children:[r.jsx(d.$N,{children:"Edytuj produkt"}),r.jsx(d.Be,{children:"Zmień nazwę, jednostkę miary lub wartości odżywcze produktu."})]}),r.jsx(m.x,{className:"max-h-[60vh] pr-4",children:r.jsx("form",{onSubmit:N,id:"edit-product-form",children:(0,r.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:"Podstawowe informacje"}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"name",children:"Nazwa produktu *"}),r.jsx(o.I,{id:"name",value:f.name,onChange:e=>v({...f,name:e.target.value}),placeholder:"Np. Mąka pszenna",required:!0})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"unit",children:"Jednostka miary *"}),(0,r.jsxs)(u.Ph,{value:f.unit,onValueChange:e=>v({...f,unit:e}),required:!0,children:[r.jsx(u.i4,{children:r.jsx(u.ki,{placeholder:"Wybierz jednostkę"})}),r.jsx(u.Bw,{children:g.map(e=>r.jsx(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"manufacturer",children:"Nazwa producenta"}),r.jsx(o.I,{id:"manufacturer",value:f.manufacturer,onChange:e=>v({...f,manufacturer:e.target.value}),placeholder:"Np. Młyny Polskie"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"font-semibold text-sm text-gray-700",children:["Wartości odżywcze (na 100","ml"===f.unit||"l"===f.unit?" ml":" g",")"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"calories",children:"Kalorie (kcal)"}),r.jsx(o.I,{id:"calories",type:"number",step:"0.01",min:"0",value:f.calories,onChange:e=>v({...f,calories:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"salt",children:"S\xf3l (g)"}),r.jsx(o.I,{id:"salt",type:"number",step:"0.01",min:"0",value:f.salt,onChange:e=>v({...f,salt:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"protein",children:"Białko (g)"}),r.jsx(o.I,{id:"protein",type:"number",step:"0.01",min:"0",value:f.protein,onChange:e=>v({...f,protein:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2 col-span-2",children:[r.jsx(c._,{htmlFor:"fat",children:"Tłuszcz (g)"}),r.jsx(o.I,{id:"fat",type:"number",step:"0.01",min:"0",value:f.fat,onChange:e=>v({...f,fat:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2 col-span-2 pl-4",children:[r.jsx(c._,{htmlFor:"saturatedFat",className:"text-sm text-muted-foreground",children:"w tym kwasy tłuszczowe nasycone (g)"}),r.jsx(o.I,{id:"saturatedFat",type:"number",step:"0.01",min:"0",value:f.saturatedFat,onChange:e=>v({...f,saturatedFat:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2 col-span-2",children:[r.jsx(c._,{htmlFor:"carbohydrates",children:"Węglowodany (g)"}),r.jsx(o.I,{id:"carbohydrates",type:"number",step:"0.01",min:"0",value:f.carbohydrates,onChange:e=>v({...f,carbohydrates:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2 col-span-2 pl-4",children:[r.jsx(c._,{htmlFor:"sugars",className:"text-sm text-muted-foreground",children:"w tym cukry (g)"}),r.jsx(o.I,{id:"sugars",type:"number",step:"0.01",min:"0",value:f.sugars,onChange:e=>v({...f,sugars:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"calcium",children:"Wapń (mg)"}),r.jsx(o.I,{id:"calcium",type:"number",step:"0.01",min:"0",value:f.calcium,onChange:e=>v({...f,calcium:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"iron",children:"Żelazo (mg)"}),r.jsx(o.I,{id:"iron",type:"number",step:"0.01",min:"0",value:f.iron,onChange:e=>v({...f,iron:e.target.value}),placeholder:"0"})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx(c._,{htmlFor:"vitaminC",children:"Witamina C (mg)"}),r.jsx(o.I,{id:"vitaminC",type:"number",step:"0.01",min:"0",value:f.vitaminC,onChange:e=>v({...f,vitaminC:e.target.value}),placeholder:"0"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:"Alergeny"}),r.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Wybierz alergeny, kt\xf3re występują w tym produkcie (pole opcjonalne)"}),r.jsx("div",{className:"grid grid-cols-1 gap-3 max-h-[200px] overflow-y-auto border rounded-md p-3",children:p.Ri.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx(x.X,{id:`allergen-${e.id}`,checked:f.allergens.includes(e.id),onCheckedChange:()=>b(e.id),disabled:y}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)(c._,{htmlFor:`allergen-${e.id}`,className:"text-sm font-medium leading-none cursor-pointer",children:["A:",e.id," - ",e.name]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]})]},e.id))}),f.allergens.length>0&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:(0,r.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["Wybrane alergeny: ",f.allergens.sort((e,t)=>e-t).map(e=>`A:${e}`).join(", ")]})})]})]})})}),(0,r.jsxs)(d.cN,{children:[r.jsx(n.z,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:y,children:"Anuluj"}),r.jsx(n.z,{type:"submit",form:"edit-product-form",disabled:y,children:y?"Zapisywanie...":"Zapisz zmiany"})]})]})})}function j({product:e}){let[t,a]=(0,s.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.z,{onClick:()=>a(!0),variant:"secondary",size:"sm",className:"gap-2 bg-white hover:bg-gray-100 text-blue-900 border border-blue-200",children:[r.jsx(i.Z,{className:"h-4 w-4"}),"Edytuj produkt"]}),r.jsx(y,{open:t,onOpenChange:a,product:e})]})}},70478:(e,t,a)=>{"use strict";a.d(t,{TransactionsList:()=>w});var r=a(62901),s=a(71945);let n=(0,s.Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),i=(0,s.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var l=a(30808),d=a(45302),o=a(90891),c=a(24383),u=a(45874),m=a(65923),x=a(250),p=a(82657),h=a(72388),g=a(53275),y=a(43921),j=a(84374),f=a(1447);function v({transaction:e}){let t=(0,j.useRouter)(),[a,s]=(0,c.useState)(!1),[n,i]=(0,c.useState)(!1),[l,d]=(0,c.useState)({date:(0,f.WU)(new Date(e.date),"yyyy-MM-dd"),document:e.document,type:e.type,quantity:e.quantity.toString()}),o=async a=>{a.preventDefault(),i(!0);try{(await fetch(`/api/transactions/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok?(y.A.success("Transakcja została zaktualizowana"),s(!1),t.refresh()):y.A.error("Błąd podczas aktualizacji transakcji")}catch(e){console.error("Error updating transaction:",e),y.A.error("Błąd podczas aktualizacji transakcji")}finally{i(!1)}};return(0,r.jsxs)(m.Vq,{open:a,onOpenChange:s,children:[r.jsx(m.hg,{asChild:!0,children:r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(g.Z,{className:"w-4 h-4"})})}),(0,r.jsxs)(m.cZ,{children:[(0,r.jsxs)(m.fK,{children:[r.jsx(m.$N,{children:"Edytuj transakcję"}),r.jsx(m.Be,{children:"Zmień dane transakcji. Wszystkie kolejne stany magazynowe zostaną automatycznie przeliczone."})]}),(0,r.jsxs)("form",{onSubmit:o,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"date",children:"Data"}),r.jsx(x.I,{id:"date",name:"date",type:"date",value:l.date,onChange:e=>d({...l,date:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"document",children:"Nr dokumentu (opcjonalnie)"}),r.jsx(x.I,{id:"document",name:"document",value:l.document,onChange:e=>d({...l,document:e.target.value}),placeholder:"Nr faktury, WZ, itp."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"type",children:"Typ transakcji"}),(0,r.jsxs)(h.Ph,{value:l.type,onValueChange:e=>d({...l,type:e}),children:[r.jsx(h.i4,{children:r.jsx(h.ki,{})}),(0,r.jsxs)(h.Bw,{children:[r.jsx(h.Ql,{value:"INCOME",children:"Przych\xf3d"}),r.jsx(h.Ql,{value:"OUTCOME",children:"Rozch\xf3d"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(p._,{htmlFor:"quantity",children:"Ilość"}),r.jsx(x.I,{id:"quantity",name:"quantity",type:"number",step:"0.5",value:l.quantity,onChange:e=>d({...l,quantity:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx(u.z,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:n,children:"Anuluj"}),r.jsx(u.z,{type:"submit",disabled:n,children:n?"Zapisywanie...":"Zapisz zmiany"})]})]})]})]})}var b=a(14573),N=a(71028);function k({transactionId:e}){let t=(0,j.useRouter)(),[a,s]=(0,c.useState)(!1),n=async()=>{s(!0);try{(await fetch(`/api/transactions/${e}`,{method:"DELETE"})).ok?(y.A.success("Transakcja została usunięta"),t.refresh()):y.A.error("Błąd podczas usuwania transakcji")}catch(e){console.error("Error deleting transaction:",e),y.A.error("Błąd podczas usuwania transakcji")}finally{s(!1)}};return(0,r.jsxs)(b.aR,{children:[r.jsx(b.vW,{asChild:!0,children:r.jsx(u.z,{variant:"ghost",size:"sm",children:r.jsx(N.Z,{className:"w-4 h-4 text-red-600"})})}),(0,r.jsxs)(b._T,{children:[(0,r.jsxs)(b.fY,{children:[r.jsx(b.f$,{children:"Czy na pewno usunąć tę transakcję?"}),r.jsx(b.yT,{children:"Ta akcja nie może być cofnięta. Wszystkie kolejne stany magazynowe zostaną automatycznie przeliczone."})]}),(0,r.jsxs)(b.xo,{children:[r.jsx(b.le,{children:"Anuluj"}),r.jsx(b.OL,{onClick:n,disabled:a,children:a?"Usuwanie...":"Usuń"})]})]})]})}function w({transactions:e}){return e&&0!==e.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-4 sm:px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 flex items-center space-x-2",children:[r.jsx(n,{className:"w-4 h-4 sm:w-5 sm:h-5"}),r.jsx("span",{children:"Historia Transakcji"}),(0,r.jsxs)("span",{className:"text-xs sm:text-sm text-gray-500 ml-2",children:["(",e.length,")"]})]})}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dokument"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Przych\xf3d"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rozch\xf3d"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Saldo"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,t)=>(0,r.jsxs)(o.E.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(i,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e?.date?new Date(e.date).toLocaleDateString("pl-PL"):"Nieznana data"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900",children:e?.document||"Brak numeru"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e?.type==="INCOME"?(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1",children:[r.jsx(l.Z,{className:"w-4 h-4 text-green-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["+",(e?.quantity||0).toFixed(2)]})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e?.type==="OUTCOME"?(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1",children:[r.jsx(d.Z,{className:"w-4 h-4 text-red-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-red-600",children:["-",(e?.quantity||0).toFixed(2)]})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsx("span",{className:"text-sm font-bold text-gray-900",children:(e?.balance||0).toFixed(2)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx(v,{transaction:e}),r.jsx(k,{transactionId:e?.id||""})]})})]},e?.id||`transaction-${t}`))})]})}),r.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:e.map((e,t)=>(0,r.jsxs)(o.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"p-4 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(i,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e?.date?new Date(e.date).toLocaleDateString("pl-PL"):"Nieznana data"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(v,{transaction:e}),r.jsx(k,{transactionId:e?.id||""})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Dokument:"}),r.jsx("span",{className:"text-sm text-gray-900 ml-2",children:e?.document||"Brak numeru"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,r.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Przych\xf3d"}),e?.type==="INCOME"?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[r.jsx(l.Z,{className:"w-3 h-3 text-green-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["+",(e?.quantity||0).toFixed(2)]})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"-"})]}),(0,r.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Rozch\xf3d"}),e?.type==="OUTCOME"?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[r.jsx(d.Z,{className:"w-3 h-3 text-red-600"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-red-600",children:["-",(e?.quantity||0).toFixed(2)]})]}):r.jsx("span",{className:"text-sm text-gray-400",children:"-"})]}),(0,r.jsxs)("div",{className:"text-center p-2 bg-blue-50 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Saldo"}),r.jsx("span",{className:"text-sm font-bold text-gray-900",children:(e?.balance||0).toFixed(2)})]})]})]},e?.id||`transaction-mobile-${t}`))}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsxs)("span",{className:"text-gray-600",children:["Łączna liczba transakcji: ",r.jsx("strong",{children:e.length})]}),(0,r.jsxs)("span",{className:"text-gray-600",children:["Ostatnie saldo: ",r.jsx("strong",{className:"text-gray-900",children:e.length>0?(e[e.length-1]?.balance||0).toFixed(2):"0.00"})]})]})})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 p-12 text-center",children:[r.jsx(n,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Brak transakcji"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Nie znaleziono żadnych transakcji dla tego produktu."})]})}},53275:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(71945).Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},71028:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});let r=(0,a(71945).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},94792:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b,dynamic:()=>v});var r=a(83537),s=a(74010),n=a(89004);let i=(0,n.Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),l=(0,n.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),d=(0,n.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),o=(0,n.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),c=(0,n.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=a(88895);let m=(0,u.createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/edit-product-button.tsx#EditProductButton`),x=(0,u.createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/delete-product-button.tsx#DeleteProductButton`);var p=a(81526);function h({product:e}){let t=e?.transactions?.length||0,a=e?.transactions?.[e.transactions.length-1];return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-4 sm:px-6 py-6 sm:py-8 text-white",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsx("div",{className:"p-3 sm:p-4 bg-white/20 rounded-lg flex-shrink-0",children:r.jsx(i,{className:"w-6 h-6 sm:w-8 sm:h-8"})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold break-words",children:[e?.name||"Nieznany produkt",e?.manufacturer&&(0,r.jsxs)("span",{className:"text-blue-100",children:[" - ",e.manufacturer]})]}),r.jsx("p",{className:"text-blue-100 mt-1 text-sm sm:text-base",children:"Karta produktu - historia transakcji"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 sm:gap-3 flex-shrink-0",children:[r.jsx(m,{product:{id:e.id,name:e.name,unit:e.unit,manufacturer:e.manufacturer,calories:e.calories,salt:e.salt,protein:e.protein,fat:e.fat,saturatedFat:e.saturatedFat,carbohydrates:e.carbohydrates,sugars:e.sugars,calcium:e.calcium,iron:e.iron,vitaminC:e.vitaminC,allergens:e.allergens}}),r.jsx(x,{product:{id:e.id,name:e.name}})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-900",children:(e?.currentStock||0).toFixed(2)}),(0,r.jsxs)("div",{className:"text-sm text-blue-700",children:["Aktualny stan (",e?.unit||"szt",")"]}),r.jsx("div",{className:"mt-2",children:(e?.currentStock||0)>0?(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:[r.jsx(l,{className:"w-3 h-3 mr-1"}),"Na stanie"]}):(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-red-100 text-red-800",children:[r.jsx(d,{className:"w-3 h-3 mr-1"}),"Brak stanu"]})})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-semibold text-gray-900",children:e?.unit||"szt"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Jednostka miary"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-xl font-semibold text-gray-900",children:t}),r.jsx("div",{className:"text-sm text-gray-600",children:"Łączna liczba transakcji"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:a?new Date(a.date).toLocaleDateString("pl-PL"):"Brak"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 flex items-center justify-center",children:[r.jsx(o,{className:"w-3 h-3 mr-1"}),"Ostatnia transakcja"]})]})]}),e.allergens&&e.allergens.length>0&&(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx(c,{className:"w-5 h-5 text-orange-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Alergeny"})]}),r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsx("div",{className:"space-y-2",children:(0,p.Xr)(e.allergens).map((e,t)=>(0,r.jsxs)("div",{className:"text-sm text-gray-900 flex items-start space-x-2",children:[r.jsx("span",{className:"font-semibold text-orange-600",children:"•"}),r.jsx("span",{children:e})]},t))})})]}),(0,r.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Wartości odżywcze (na 100 ","ml"===e.unit||"l"===e.unit?"ml":"g",")"]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Pola podświetlone na czerwono wymagają uzupełnienia"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${e.calories&&e.calories>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Kalorie"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:e.calories&&e.calories>0?`${e.calories} kcal`:"Brak danych"})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.protein&&void 0!==e.protein&&e.protein>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Białko"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.protein&&void 0!==e.protein&&e.protein>0?`${e.protein} g`:"Brak danych"})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.fat&&void 0!==e.fat&&e.fat>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Tłuszcz"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.fat&&void 0!==e.fat&&e.fat>0?`${e.fat} g`:"Brak danych"}),null!==e.saturatedFat&&void 0!==e.saturatedFat&&e.saturatedFat>0&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["w tym nasycone: ",e.saturatedFat," g"]})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.carbohydrates&&void 0!==e.carbohydrates&&e.carbohydrates>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Węglowodany"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.carbohydrates&&void 0!==e.carbohydrates&&e.carbohydrates>0?`${e.carbohydrates} g`:"Brak danych"}),null!==e.sugars&&void 0!==e.sugars&&e.sugars>0&&(0,r.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["w tym cukry: ",e.sugars," g"]})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.salt&&void 0!==e.salt?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"S\xf3l"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.salt&&void 0!==e.salt?`${e.salt} g`:"Brak danych"})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.calcium&&void 0!==e.calcium&&e.calcium>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Wapń"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.calcium&&void 0!==e.calcium&&e.calcium>0?`${e.calcium} mg`:"Brak danych"})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.iron&&void 0!==e.iron&&e.iron>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Żelazo"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.iron&&void 0!==e.iron&&e.iron>0?`${e.iron} mg`:"Brak danych"})]}),(0,r.jsxs)("div",{className:`rounded-lg p-3 border-2 ${null!==e.vitaminC&&void 0!==e.vitaminC&&e.vitaminC>0?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300"}`,children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Witamina C"}),r.jsx("div",{className:"text-lg font-semibold text-gray-900",children:null!==e.vitaminC&&void 0!==e.vitaminC&&e.vitaminC>0?`${e.vitaminC} mg`:"Brak danych"})]})]})]})]})]})}let g=(0,u.createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/transactions-list.tsx#TransactionsList`),y=(0,u.createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/add-transaction-button.tsx#AddTransactionButton`),j=(0,u.createProxy)(String.raw`/home/ubuntu/kartoteka_magazynowa_app/nextjs_space/components/back-to-list-button.tsx#BackToListButton`);var f=a(15438);let v="force-dynamic";async function b({params:e}){let t=await (0,s.gk)(e.id);return t||(0,f.notFound)(),(0,r.jsxs)("div",{className:"space-y-8",children:[r.jsx(j,{}),r.jsx(h,{product:t}),r.jsx("div",{className:"flex justify-end",children:r.jsx(y,{productId:t.id})}),r.jsx(g,{transactions:t.transactions||[],productId:t.id})]})}},81526:(e,t,a)=>{"use strict";a.d(t,{Xr:()=>n,x8:()=>s});let r=[{id:1,name:"GLUTEN",description:"Ziarna zb\xf3ż zawierające GLUTEN (pszenica, żyto, jęczmień, owies, orkisz, kamut) oraz produkty pochodne"},{id:2,name:"SKORUPIAKI",description:"SKORUPIAKI i produkty pochodne"},{id:3,name:"JAJA",description:"JAJA i produkty pochodne"},{id:4,name:"RYBY",description:"RYBY i produkty pochodne"},{id:5,name:"ORZESZKI ZIEMNE",description:"ORZESZKI ZIEMNE (arachidowe) i produkty pochodne"},{id:6,name:"SOJA",description:"SOJA i produkty pochodne"},{id:7,name:"MLEKO",description:"MLEKO i produkty pochodne (łącznie z laktozą)"},{id:8,name:"ORZECHY",description:"ORZECHY (migdały, laskowe, włoskie, nerkowca, pekan, brazylijskie, pistacje, makadamia) i produkty pochodne"},{id:9,name:"SELER",description:"SELER i produkty pochodne"},{id:10,name:"GORCZYCA",description:"GORCZYCA i produkty pochodne"},{id:11,name:"SEZAM",description:"NASIONA SEZAMU i produkty pochodne"},{id:12,name:"DWUTLENEK SIARKI",description:"DWUTLENEK SIARKI i siarczyny w stężeniach powyżej 10 mg/kg lub 10 mg/l (SO₂)"},{id:13,name:"ŁUBIN",description:"ŁUBIN i produkty pochodne"},{id:14,name:"MIĘCZAKI",description:"MIĘCZAKI i produkty pochodne"}];function s(e){return e&&0!==e.length?e.sort((e,t)=>e-t).map(e=>`A:${e}`).join(", "):""}function n(e){return e&&0!==e.length?e.sort((e,t)=>e-t).map(e=>{let t=r.find(t=>t.id===e);return t?`A:${e} - ${t.description}`:`A:${e}`}):[]}},89004:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(3995);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,a)=>!!e&&a.indexOf(e)===t).join(" ");var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:d,iconNode:o,...c},u)=>(0,r.createElement)("svg",{ref:u,...i,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:n("lucide",l),...c},[...o.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(d)?d:[d]])),d=(e,t)=>{let a=(0,r.forwardRef)(({className:a,...i},d)=>(0,r.createElement)(l,{ref:d,iconNode:t,className:n(`lucide-${s(e)}`,a),...i}));return a.displayName=`${e}`,a}},15438:(e,t,a)=>{"use strict";var r=a(34513);a.o(r,"notFound")&&a.d(t,{notFound:function(){return r.notFound}})},34513:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{ReadonlyURLSearchParams:function(){return i},RedirectType:function(){return r.RedirectType},notFound:function(){return s.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect}});let r=a(69138),s=a(18403);class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},18403:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{isNotFoundError:function(){return s},notFound:function(){return r}});let a="NEXT_NOT_FOUND";function r(){let e=Error(a);throw e.digest=a,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===a}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},34769:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return a}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(a||(a={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},69138:(e,t,a)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{RedirectType:function(){return r},getRedirectError:function(){return d},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return x},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return o}});let s=a(54580),n=a(72934),i=a(34769),l="NEXT_REDIRECT";function d(e,t,a){void 0===a&&(a=i.RedirectStatusCode.TemporaryRedirect);let r=Error(l);r.digest=l+";"+t+";"+e+";"+a+";";let n=s.requestAsyncStorage.getStore();return n&&(r.mutableCookies=n.mutableCookies),r}function o(e,t){void 0===t&&(t="replace");let a=n.actionAsyncStorage.getStore();throw d(e,t,(null==a?void 0:a.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let a=n.actionAsyncStorage.getStore();throw d(e,t,(null==a?void 0:a.isAction)?i.RedirectStatusCode.SeeOther:i.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,a,r,s]=e.digest.split(";",4),n=Number(s);return t===l&&("replace"===a||"push"===a)&&"string"==typeof r&&!isNaN(n)&&n in i.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function x(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[4372,9405,7069,5972,2203,3443,8410,1475,4425,5044,5185,4946],()=>a(21576));module.exports=r})();